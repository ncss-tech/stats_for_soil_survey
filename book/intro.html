<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 1 Introduction to R | Statistics for Soil Survey - Part 1</title>
  <meta name="description" content="Web-based course content for Statistics for Soil Survey - Part 1 made with bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.28 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 1 Introduction to R | Statistics for Soil Survey - Part 1" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Web-based course content for Statistics for Soil Survey - Part 1 made with bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 Introduction to R | Statistics for Soil Survey - Part 1" />
  
  <meta name="twitter:description" content="Web-based course content for Statistics for Soil Survey - Part 1 made with bookdown::gitbook." />
  

<meta name="author" content="Soil Survey Staff" />


<meta name="date" content="2023-01-06" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="data.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.1.1/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.1.1/leaflet-providers-plugin.js"></script>
<link href="libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="index.html">Statistics for Soil Survey - Part 1</a></li>
<li><a href="../book2/index.html">Statistics for Soil Survey - Part 2</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Pre-course Assignment</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#create-workspace"><i class="fa fa-check"></i><b>0.1</b> Create Workspace</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#configure-rstudio"><i class="fa fa-check"></i><b>0.2</b> Configure RStudio</a></li>
<li class="chapter" data-level="0.3" data-path="index.html"><a href="index.html#essentials"><i class="fa fa-check"></i><b>0.3</b> Essentials</a></li>
<li class="chapter" data-level="0.4" data-path="index.html"><a href="index.html#personalization"><i class="fa fa-check"></i><b>0.4</b> Personalization</a></li>
<li class="chapter" data-level="0.5" data-path="index.html"><a href="index.html#install-required-packages"><i class="fa fa-check"></i><b>0.5</b> Install Required Packages</a></li>
<li class="chapter" data-level="0.6" data-path="index.html"><a href="index.html#dealing-with-errors"><i class="fa fa-check"></i><b>0.6</b> Dealing With Errors</a>
<ul>
<li class="chapter" data-level="0.6.1" data-path="index.html"><a href="index.html#no-output-is-produced-after-pasting-into-console"><i class="fa fa-check"></i><b>0.6.1</b> No output is produced after pasting into console</a></li>
<li class="chapter" data-level="0.6.2" data-path="index.html"><a href="index.html#somepackage-is-not-available-for-r-version-x.y.z"><i class="fa fa-check"></i><b>0.6.2</b> <code>‘SOMEPACKAGE’ is not available (for R version X.Y.Z)</code></a></li>
</ul></li>
<li class="chapter" data-level="0.7" data-path="index.html"><a href="index.html#packages-not-on-cran"><i class="fa fa-check"></i><b>0.7</b> Packages not on CRAN</a></li>
<li class="chapter" data-level="0.8" data-path="index.html"><a href="index.html#connect-local-nasis"><i class="fa fa-check"></i><b>0.8</b> Connect Local NASIS</a></li>
<li class="chapter" data-level="0.9" data-path="index.html"><a href="index.html#proof"><i class="fa fa-check"></i><b>0.9</b> Proof</a></li>
<li class="chapter" data-level="0.10" data-path="index.html"><a href="index.html#additional-supportoptional-readings"><i class="fa fa-check"></i><b>0.10</b> Additional Support/Optional Readings</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction to R</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#outline"><i class="fa fa-check"></i><b>1.1</b> Outline</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#course-overview"><i class="fa fa-check"></i><b>1.2</b> Course Overview</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="intro.html"><a href="intro.html#course-objectives"><i class="fa fa-check"></i><b>1.2.1</b> Course Objectives</a></li>
<li class="chapter" data-level="1.2.2" data-path="intro.html"><a href="intro.html#why-is-this-training-needed"><i class="fa fa-check"></i><b>1.2.2</b> Why is this training needed?</a></li>
<li class="chapter" data-level="1.2.3" data-path="intro.html"><a href="intro.html#why-is-course-organized-this-way"><i class="fa fa-check"></i><b>1.2.3</b> Why is course organized this way?</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#what-is-r"><i class="fa fa-check"></i><b>1.3</b> What is R?</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="intro.html"><a href="intro.html#why-should-i-learn-r"><i class="fa fa-check"></i><b>1.3.1</b> Why Should I Learn R?</a></li>
<li class="chapter" data-level="1.3.2" data-path="intro.html"><a href="intro.html#what-can-r-do"><i class="fa fa-check"></i><b>1.3.2</b> What can R do?</a></li>
<li class="chapter" data-level="1.3.3" data-path="intro.html"><a href="intro.html#packages"><i class="fa fa-check"></i><b>1.3.3</b> Packages</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#rstudio-an-integrated-development-environment-ide-for-r"><i class="fa fa-check"></i><b>1.4</b> RStudio: An Integrated Development Environment (IDE) for R</a></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#rcmdr-r-commander-a-graphical-user-interface-for-r"><i class="fa fa-check"></i><b>1.5</b> Rcmdr (R Commander): A Graphical User Interface for R</a></li>
<li class="chapter" data-level="1.6" data-path="intro.html"><a href="intro.html#r-basics"><i class="fa fa-check"></i><b>1.6</b> R basics</a></li>
<li class="chapter" data-level="1.7" data-path="intro.html"><a href="intro.html#managing-packages"><i class="fa fa-check"></i><b>1.7</b> Managing Packages</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="intro.html"><a href="intro.html#installing-packages"><i class="fa fa-check"></i><b>1.7.1</b> Installing Packages</a></li>
<li class="chapter" data-level="1.7.2" data-path="intro.html"><a href="intro.html#loading-packages"><i class="fa fa-check"></i><b>1.7.2</b> Loading Packages</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="intro.html"><a href="intro.html#getting-help"><i class="fa fa-check"></i><b>1.8</b> Getting Help</a></li>
<li class="chapter" data-level="1.9" data-path="intro.html"><a href="intro.html#documenting-your-work"><i class="fa fa-check"></i><b>1.9</b> Documenting your work</a>
<ul>
<li class="chapter" data-level="1.9.1" data-path="intro.html"><a href="intro.html#basic-tips-for-scripting"><i class="fa fa-check"></i><b>1.9.1</b> Basic Tips for Scripting</a></li>
</ul></li>
<li class="chapter" data-level="1.10" data-path="intro.html"><a href="intro.html#organizing-your-work"><i class="fa fa-check"></i><b>1.10</b> Organizing your work</a>
<ul>
<li class="chapter" data-level="1.10.1" data-path="intro.html"><a href="intro.html#setting-the-working-directory"><i class="fa fa-check"></i><b>1.10.1</b> Setting the Working Directory</a></li>
<li class="chapter" data-level="1.10.2" data-path="intro.html"><a href="intro.html#rstudio-projects-.rproj-files"><i class="fa fa-check"></i><b>1.10.2</b> RStudio Projects (.Rproj files)</a></li>
</ul></li>
<li class="chapter" data-level="1.11" data-path="intro.html"><a href="intro.html#saving-your-work"><i class="fa fa-check"></i><b>1.11</b> Saving your work</a></li>
<li class="chapter" data-level="1.12" data-path="intro.html"><a href="intro.html#exercise-1"><i class="fa fa-check"></i><b>1.12</b> Exercise 1</a></li>
<li class="chapter" data-level="1.13" data-path="intro.html"><a href="intro.html#loading-data"><i class="fa fa-check"></i><b>1.13</b> Loading Data</a></li>
<li class="chapter" data-level="1.14" data-path="intro.html"><a href="intro.html#data-manipulation"><i class="fa fa-check"></i><b>1.14</b> Data manipulation</a>
<ul>
<li class="chapter" data-level="1.14.1" data-path="intro.html"><a href="intro.html#viewing-and-removing-data"><i class="fa fa-check"></i><b>1.14.1</b> Viewing and Removing Data</a></li>
<li class="chapter" data-level="1.14.2" data-path="intro.html"><a href="intro.html#filtering-or-subsetting-data"><i class="fa fa-check"></i><b>1.14.2</b> Filtering or Subsetting Data</a></li>
<li class="chapter" data-level="1.14.3" data-path="intro.html"><a href="intro.html#transforming-data"><i class="fa fa-check"></i><b>1.14.3</b> Transforming Data</a></li>
<li class="chapter" data-level="1.14.4" data-path="intro.html"><a href="intro.html#sorting-data"><i class="fa fa-check"></i><b>1.14.4</b> Sorting Data</a></li>
<li class="chapter" data-level="1.14.5" data-path="intro.html"><a href="intro.html#piping-data"><i class="fa fa-check"></i><b>1.14.5</b> Piping Data</a></li>
<li class="chapter" data-level="1.14.6" data-path="intro.html"><a href="intro.html#mergingjoining-or-combining-data"><i class="fa fa-check"></i><b>1.14.6</b> Merging/Joining or Combining Data</a></li>
<li class="chapter" data-level="1.14.7" data-path="intro.html"><a href="intro.html#aggregating-or-grouping-data"><i class="fa fa-check"></i><b>1.14.7</b> Aggregating or Grouping Data</a></li>
<li class="chapter" data-level="1.14.8" data-path="intro.html"><a href="intro.html#reshaping-data"><i class="fa fa-check"></i><b>1.14.8</b> Reshaping Data</a></li>
<li class="chapter" data-level="1.14.9" data-path="intro.html"><a href="intro.html#exporting-data"><i class="fa fa-check"></i><b>1.14.9</b> Exporting Data</a></li>
</ul></li>
<li class="chapter" data-level="1.15" data-path="intro.html"><a href="intro.html#exercise-2"><i class="fa fa-check"></i><b>1.15</b> Exercise 2</a></li>
<li class="chapter" data-level="1.16" data-path="intro.html"><a href="intro.html#review"><i class="fa fa-check"></i><b>1.16</b> Review</a></li>
<li class="chapter" data-level="1.17" data-path="intro.html"><a href="intro.html#additional-reading-introduction"><i class="fa fa-check"></i><b>1.17</b> Additional Reading (Introduction)</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>2</b> The Data We Use</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data.html"><a href="data.html#objectives-tabular-data-structures"><i class="fa fa-check"></i><b>2.1</b> Objectives (Tabular Data Structures)</a></li>
<li class="chapter" data-level="2.2" data-path="data.html"><a href="data.html#the-structure-of-soil-data"><i class="fa fa-check"></i><b>2.2</b> The Structure of Soil Data</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="data.html"><a href="data.html#package-references"><i class="fa fa-check"></i><b>2.2.1</b> Package References</a></li>
<li class="chapter" data-level="2.2.2" data-path="data.html"><a href="data.html#soildb-functions-for-tabular-data"><i class="fa fa-check"></i><b>2.2.2</b> soilDB functions for tabular data</a></li>
<li class="chapter" data-level="2.2.3" data-path="data.html"><a href="data.html#importance-of-pedon-data"><i class="fa fa-check"></i><b>2.2.3</b> Importance of Pedon Data</a></li>
<li class="chapter" data-level="2.2.4" data-path="data.html"><a href="data.html#some-issues-with-pedon-data"><i class="fa fa-check"></i><b>2.2.4</b> Some Issues With Pedon Data</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data.html"><a href="data.html#challenges-with-pedon-data"><i class="fa fa-check"></i><b>2.3</b> Challenges with Pedon Data</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="data.html"><a href="data.html#meeting-the-challenges"><i class="fa fa-check"></i><b>2.3.1</b> Meeting the Challenges</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="data.html"><a href="data.html#the-soilprofilecollection"><i class="fa fa-check"></i><b>2.4</b> The <code>SoilProfileCollection</code></a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="data.html"><a href="data.html#soilprofilecollection-methods"><i class="fa fa-check"></i><b>2.4.1</b> <code>SoilProfileCollection</code> methods</a></li>
<li class="chapter" data-level="2.4.2" data-path="data.html"><a href="data.html#exercise-assemble-a-soilprofilecollection-from-several-csv-files"><i class="fa fa-check"></i><b>2.4.2</b> Exercise: Assemble a <code>SoilProfileCollection</code> from several CSV files</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="data.html"><a href="data.html#using-the-soildb-package"><i class="fa fa-check"></i><b>2.5</b> Using the <code>soilDB</code> Package</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="data.html"><a href="data.html#open-database-connectivity-odbc-connection-to-nasis"><i class="fa fa-check"></i><b>2.5.1</b> Open Database Connectivity (ODBC) Connection to NASIS</a></li>
<li class="chapter" data-level="2.5.2" data-path="data.html"><a href="data.html#fetchnasis"><i class="fa fa-check"></i><b>2.5.2</b> <code>fetchNASIS()</code></a></li>
<li class="chapter" data-level="2.5.3" data-path="data.html"><a href="data.html#the-gopheridge-dataset"><i class="fa fa-check"></i><b>2.5.3</b> The <code>gopheridge</code> Dataset</a></li>
<li class="chapter" data-level="2.5.4" data-path="data.html"><a href="data.html#further-reading-reference"><i class="fa fa-check"></i><b>2.5.4</b> Further Reading / Reference</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="data.html"><a href="data.html#working-with-data-in-r"><i class="fa fa-check"></i><b>2.6</b> Working with Data in R</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="data.html"><a href="data.html#summaries"><i class="fa fa-check"></i><b>2.6.1</b> Summaries</a></li>
<li class="chapter" data-level="2.6.2" data-path="data.html"><a href="data.html#missing-values"><i class="fa fa-check"></i><b>2.6.2</b> Missing Values</a></li>
<li class="chapter" data-level="2.6.3" data-path="data.html"><a href="data.html#logical-operators"><i class="fa fa-check"></i><b>2.6.3</b> Logical Operators</a></li>
<li class="chapter" data-level="2.6.4" data-path="data.html"><a href="data.html#pattern-matching"><i class="fa fa-check"></i><b>2.6.4</b> Pattern Matching</a></li>
<li class="chapter" data-level="2.6.5" data-path="data.html"><a href="data.html#filtering"><i class="fa fa-check"></i><b>2.6.5</b> Filtering</a></li>
<li class="chapter" data-level="2.6.6" data-path="data.html"><a href="data.html#dates-and-times"><i class="fa fa-check"></i><b>2.6.6</b> Dates and Times</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="data.html"><a href="data.html#fetchnasis-data-checks"><i class="fa fa-check"></i><b>2.7</b> <code>fetchNASIS</code> data checks</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="data.html"><a href="data.html#inspecting-results"><i class="fa fa-check"></i><b>2.7.1</b> Inspecting Results</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="data.html"><a href="data.html#extended-data-functions"><i class="fa fa-check"></i><b>2.8</b> Extended Data Functions</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="data.html"><a href="data.html#elements-of-get_extended_data_from_nasis"><i class="fa fa-check"></i><b>2.8.1</b> Elements of <code>get_extended_data_from_NASIS()</code></a></li>
<li class="chapter" data-level="2.8.2" data-path="data.html"><a href="data.html#load-example-data-1"><i class="fa fa-check"></i><b>2.8.2</b> Load Example Data</a></li>
<li class="chapter" data-level="2.8.3" data-path="data.html"><a href="data.html#visualizing-common-landforms"><i class="fa fa-check"></i><b>2.8.3</b> Visualizing Common Landforms</a></li>
<li class="chapter" data-level="2.8.4" data-path="data.html"><a href="data.html#diagnostic-features"><i class="fa fa-check"></i><b>2.8.4</b> Diagnostic Features</a></li>
<li class="chapter" data-level="2.8.5" data-path="data.html"><a href="data.html#comparing-horizon-data-with-diagnostic-intervals"><i class="fa fa-check"></i><b>2.8.5</b> Comparing Horizon Data with Diagnostic “Intervals”</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="data.html"><a href="data.html#custom-queries-to-local-nasis-database"><i class="fa fa-check"></i><b>2.9</b> Custom Queries to Local NASIS Database</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="eda.html"><a href="eda.html"><i class="fa fa-check"></i><b>3</b> Exploratory Data Analysis</a>
<ul>
<li class="chapter" data-level="3.1" data-path="eda.html"><a href="eda.html#objectives-exploratory-data-analysis"><i class="fa fa-check"></i><b>3.1</b> Objectives (Exploratory Data Analysis)</a></li>
<li class="chapter" data-level="3.2" data-path="eda.html"><a href="eda.html#statistics"><i class="fa fa-check"></i><b>3.2</b> Statistics</a></li>
<li class="chapter" data-level="3.3" data-path="eda.html"><a href="eda.html#data-inspection"><i class="fa fa-check"></i><b>3.3</b> Data Inspection</a></li>
<li class="chapter" data-level="3.4" data-path="eda.html"><a href="eda.html#exercise-1-fetch-and-inspect"><i class="fa fa-check"></i><b>3.4</b> Exercise 1: fetch and inspect</a></li>
<li class="chapter" data-level="3.5" data-path="eda.html"><a href="eda.html#descriptive-statistics"><i class="fa fa-check"></i><b>3.5</b> Descriptive Statistics</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="eda.html"><a href="eda.html#measures-of-central-tendency"><i class="fa fa-check"></i><b>3.5.1</b> Measures of Central Tendency</a></li>
<li class="chapter" data-level="3.5.2" data-path="eda.html"><a href="eda.html#measures-of-dispersion"><i class="fa fa-check"></i><b>3.5.2</b> Measures of Dispersion</a></li>
<li class="chapter" data-level="3.5.3" data-path="eda.html"><a href="eda.html#correlation"><i class="fa fa-check"></i><b>3.5.3</b> Correlation</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="eda.html"><a href="eda.html#exercise-2-compute-descriptive-statistics"><i class="fa fa-check"></i><b>3.6</b> Exercise 2: Compute Descriptive Statistics</a></li>
<li class="chapter" data-level="3.7" data-path="eda.html"><a href="eda.html#graphical-methods"><i class="fa fa-check"></i><b>3.7</b> Graphical Methods</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="eda.html"><a href="eda.html#distributions"><i class="fa fa-check"></i><b>3.7.1</b> Distributions</a></li>
<li class="chapter" data-level="3.7.2" data-path="eda.html"><a href="eda.html#bar-plot"><i class="fa fa-check"></i><b>3.7.2</b> Bar Plot</a></li>
<li class="chapter" data-level="3.7.3" data-path="eda.html"><a href="eda.html#histogram"><i class="fa fa-check"></i><b>3.7.3</b> Histogram</a></li>
<li class="chapter" data-level="3.7.4" data-path="eda.html"><a href="eda.html#density-curve"><i class="fa fa-check"></i><b>3.7.4</b> Density Curve</a></li>
<li class="chapter" data-level="3.7.5" data-path="eda.html"><a href="eda.html#box-plots"><i class="fa fa-check"></i><b>3.7.5</b> Box plots</a></li>
<li class="chapter" data-level="3.7.6" data-path="eda.html"><a href="eda.html#quantile-comparison-plots-qqplot"><i class="fa fa-check"></i><b>3.7.6</b> Quantile comparison plots (QQplot)</a></li>
<li class="chapter" data-level="3.7.7" data-path="eda.html"><a href="eda.html#the-normal-distribution"><i class="fa fa-check"></i><b>3.7.7</b> The ‘Normal’ distribution</a></li>
<li class="chapter" data-level="3.7.8" data-path="eda.html"><a href="eda.html#scatterplots-and-line-plots"><i class="fa fa-check"></i><b>3.7.8</b> Scatterplots and Line Plots</a></li>
<li class="chapter" data-level="3.7.9" data-path="eda.html"><a href="eda.html#rd-dimension---color-shape-size-layers-etc"><i class="fa fa-check"></i><b>3.7.9</b> 3rd Dimension - Color, Shape, Size, Layers, etc…</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="eda.html"><a href="eda.html#exercise-3-graphical-methods"><i class="fa fa-check"></i><b>3.8</b> Exercise 3: Graphical Methods</a></li>
<li class="chapter" data-level="3.9" data-path="eda.html"><a href="eda.html#transformations"><i class="fa fa-check"></i><b>3.9</b> Transformations</a>
<ul>
<li class="chapter" data-level="3.9.1" data-path="eda.html"><a href="eda.html#ph"><i class="fa fa-check"></i><b>3.9.1</b> pH</a></li>
<li class="chapter" data-level="3.9.2" data-path="eda.html"><a href="eda.html#circular-data"><i class="fa fa-check"></i><b>3.9.2</b> Circular data</a></li>
<li class="chapter" data-level="3.9.3" data-path="eda.html"><a href="eda.html#texture-class-and-fine-earth-separates"><i class="fa fa-check"></i><b>3.9.3</b> Texture Class and Fine-earth Separates</a></li>
</ul></li>
<li class="chapter" data-level="3.10" data-path="eda.html"><a href="eda.html#the-shiny-package"><i class="fa fa-check"></i><b>3.10</b> The Shiny Package</a>
<ul>
<li class="chapter" data-level="3.10.1" data-path="eda.html"><a href="eda.html#online"><i class="fa fa-check"></i><b>3.10.1</b> Online</a></li>
<li class="chapter" data-level="3.10.2" data-path="eda.html"><a href="eda.html#locally"><i class="fa fa-check"></i><b>3.10.2</b> Locally</a></li>
<li class="chapter" data-level="3.10.3" data-path="eda.html"><a href="eda.html#web-app-demonstration"><i class="fa fa-check"></i><b>3.10.3</b> Web App Demonstration</a></li>
<li class="chapter" data-level="3.10.4" data-path="eda.html"><a href="eda.html#troubleshooting-errors"><i class="fa fa-check"></i><b>3.10.4</b> Troubleshooting Errors</a></li>
<li class="chapter" data-level="3.10.5" data-path="eda.html"><a href="eda.html#shiny-app-embedding"><i class="fa fa-check"></i><b>3.10.5</b> Shiny App Embedding</a></li>
<li class="chapter" data-level="3.10.6" data-path="eda.html"><a href="eda.html#questions"><i class="fa fa-check"></i><b>3.10.6</b> Questions</a></li>
<li class="chapter" data-level="3.10.7" data-path="eda.html"><a href="eda.html#examples"><i class="fa fa-check"></i><b>3.10.7</b> Examples</a></li>
<li class="chapter" data-level="3.10.8" data-path="eda.html"><a href="eda.html#work-on-your-own"><i class="fa fa-check"></i><b>3.10.8</b> Work on your Own</a></li>
</ul></li>
<li class="chapter" data-level="3.11" data-path="eda.html"><a href="eda.html#soilreports"><i class="fa fa-check"></i><b>3.11</b> soilReports</a>
<ul>
<li class="chapter" data-level="3.11.1" data-path="eda.html"><a href="eda.html#extending-soilreports"><i class="fa fa-check"></i><b>3.11.1</b> Extending <code>soilReports</code></a></li>
<li class="chapter" data-level="3.11.2" data-path="eda.html"><a href="eda.html#exercise-run-shiny-pedon-summary"><i class="fa fa-check"></i><b>3.11.2</b> Exercise: Run Shiny Pedon Summary</a></li>
<li class="chapter" data-level="3.11.3" data-path="eda.html"><a href="eda.html#exercise-run-mapunit-comparison"><i class="fa fa-check"></i><b>3.11.3</b> Exercise: Run Mapunit Comparison</a></li>
<li class="chapter" data-level="3.11.4" data-path="eda.html"><a href="eda.html#exercise-run-lab-summary-by-taxon-name-soil-report"><i class="fa fa-check"></i><b>3.11.4</b> Exercise: Run Lab Summary By Taxon Name Soil Report</a></li>
</ul></li>
<li class="chapter" data-level="3.12" data-path="eda.html"><a href="eda.html#additional-reading-exploratory-data-analysis"><i class="fa fa-check"></i><b>3.12</b> Additional Reading (Exploratory Data Analysis)</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="spatial.html"><a href="spatial.html"><i class="fa fa-check"></i><b>4</b> Spatial Data in R</a>
<ul>
<li class="chapter" data-level="4.1" data-path="spatial.html"><a href="spatial.html#objectives-spatial-data"><i class="fa fa-check"></i><b>4.1</b> Objectives (Spatial Data)</a></li>
<li class="chapter" data-level="4.2" data-path="spatial.html"><a href="spatial.html#making-maps-with-r"><i class="fa fa-check"></i><b>4.2</b> Making Maps with R</a></li>
<li class="chapter" data-level="4.3" data-path="spatial.html"><a href="spatial.html#spatial-data-sources"><i class="fa fa-check"></i><b>4.3</b> Spatial Data Sources</a></li>
<li class="chapter" data-level="4.4" data-path="spatial.html"><a href="spatial.html#viewing-pedon-locations"><i class="fa fa-check"></i><b>4.4</b> Viewing Pedon Locations</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="spatial.html"><a href="spatial.html#plotting-geographic-data"><i class="fa fa-check"></i><b>4.4.1</b> Plotting Geographic Data</a></li>
<li class="chapter" data-level="4.4.2" data-path="spatial.html"><a href="spatial.html#exercise-1-spatial-intro"><i class="fa fa-check"></i><b>4.4.2</b> EXERCISE 1 (Spatial Intro)</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="spatial.html"><a href="spatial.html#many-packages-many-spatial-representations"><i class="fa fa-check"></i><b>4.5</b> Many Packages, Many Spatial Representations</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="spatial.html"><a href="spatial.html#the-sf-package"><i class="fa fa-check"></i><b>4.5.1</b> The <code>sf</code> package</a></li>
<li class="chapter" data-level="4.5.2" data-path="spatial.html"><a href="spatial.html#the-sp-and-rgdal-packages"><i class="fa fa-check"></i><b>4.5.2</b> The <code>sp</code> and <code>rgdal</code> Packages</a></li>
<li class="chapter" data-level="4.5.3" data-path="spatial.html"><a href="spatial.html#converting-sp-and-sf"><i class="fa fa-check"></i><b>4.5.3</b> Converting <code>sp</code> and <code>sf</code></a></li>
<li class="chapter" data-level="4.5.4" data-path="spatial.html"><a href="spatial.html#importing-exporting-vector-data"><i class="fa fa-check"></i><b>4.5.4</b> Importing / Exporting Vector Data</a></li>
<li class="chapter" data-level="4.5.5" data-path="spatial.html"><a href="spatial.html#interactive-mapping-with-mapview-and-leaflet"><i class="fa fa-check"></i><b>4.5.5</b> Interactive mapping with <code>mapview</code> and <code>leaflet</code></a></li>
<li class="chapter" data-level="4.5.6" data-path="spatial.html"><a href="spatial.html#the-raster-package"><i class="fa fa-check"></i><b>4.5.6</b> The <code>raster</code> Package</a></li>
<li class="chapter" data-level="4.5.7" data-path="spatial.html"><a href="spatial.html#converting-vector-to-raster"><i class="fa fa-check"></i><b>4.5.7</b> Converting Vector to Raster</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="spatial.html"><a href="spatial.html#coordinate-reference-systems-crs"><i class="fa fa-check"></i><b>4.6</b> Coordinate Reference Systems (CRS)</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="spatial.html"><a href="spatial.html#assigning-and-transforming-coordinate-systems"><i class="fa fa-check"></i><b>4.6.1</b> Assigning and Transforming Coordinate Systems</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="spatial.html"><a href="spatial.html#raster-data"><i class="fa fa-check"></i><b>4.7</b> Raster data</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="spatial.html"><a href="spatial.html#in-memory-versus-disk-based-processing"><i class="fa fa-check"></i><b>4.7.1</b> In-memory versus disk-based processing</a></li>
<li class="chapter" data-level="4.7.2" data-path="spatial.html"><a href="spatial.html#object-properties"><i class="fa fa-check"></i><b>4.7.2</b> Object Properties</a></li>
<li class="chapter" data-level="4.7.3" data-path="spatial.html"><a href="spatial.html#data-types"><i class="fa fa-check"></i><b>4.7.3</b> Data Types</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="spatial.html"><a href="spatial.html#spatial-overlay-operations"><i class="fa fa-check"></i><b>4.8</b> Spatial Overlay Operations</a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="spatial.html"><a href="spatial.html#vector-data"><i class="fa fa-check"></i><b>4.8.1</b> Vector Data</a></li>
<li class="chapter" data-level="4.8.2" data-path="spatial.html"><a href="spatial.html#spatial-data-extraction"><i class="fa fa-check"></i><b>4.8.2</b> Spatial Data Extraction</a></li>
<li class="chapter" data-level="4.8.3" data-path="spatial.html"><a href="spatial.html#approach"><i class="fa fa-check"></i><b>4.8.3</b> Approach</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="spatial.html"><a href="spatial.html#additional-reading-spatial"><i class="fa fa-check"></i><b>4.9</b> Additional Reading (Spatial)</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="sampling.html"><a href="sampling.html"><i class="fa fa-check"></i><b>5</b> Sampling</a>
<ul>
<li class="chapter" data-level="5.1" data-path="sampling.html"><a href="sampling.html#introduction"><i class="fa fa-check"></i><b>5.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="sampling.html"><a href="sampling.html#dsm-classes"><i class="fa fa-check"></i><b>5.1.1</b> DSM classes</a></li>
<li class="chapter" data-level="5.1.2" data-path="sampling.html"><a href="sampling.html#rules-of-thumb"><i class="fa fa-check"></i><b>5.1.2</b> Rules of thumb</a></li>
<li class="chapter" data-level="5.1.3" data-path="sampling.html"><a href="sampling.html#nssh-627.8"><i class="fa fa-check"></i><b>5.1.3</b> NSSH 627.8</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="sampling.html"><a href="sampling.html#sampling-strategies"><i class="fa fa-check"></i><b>5.2</b> Sampling Strategies</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="sampling.html"><a href="sampling.html#simple-random"><i class="fa fa-check"></i><b>5.2.1</b> Simple Random</a></li>
<li class="chapter" data-level="5.2.2" data-path="sampling.html"><a href="sampling.html#systematic"><i class="fa fa-check"></i><b>5.2.2</b> Systematic</a></li>
<li class="chapter" data-level="5.2.3" data-path="sampling.html"><a href="sampling.html#spatial-coverage-sampling"><i class="fa fa-check"></i><b>5.2.3</b> Spatial Coverage Sampling</a></li>
<li class="chapter" data-level="5.2.4" data-path="sampling.html"><a href="sampling.html#stratified-random"><i class="fa fa-check"></i><b>5.2.4</b> Stratified Random</a></li>
<li class="chapter" data-level="5.2.5" data-path="sampling.html"><a href="sampling.html#multistage-stratified-random"><i class="fa fa-check"></i><b>5.2.5</b> Multistage Stratified Random</a></li>
<li class="chapter" data-level="5.2.6" data-path="sampling.html"><a href="sampling.html#conditioned-latin-hypercube-clhs"><i class="fa fa-check"></i><b>5.2.6</b> Conditioned Latin Hypercube (cLHS)</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="sampling.html"><a href="sampling.html#evaluating-a-sampling-strategy"><i class="fa fa-check"></i><b>5.3</b> Evaluating a Sampling Strategy</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="sampling.html"><a href="sampling.html#exercise-design-a-sampling-strategy"><i class="fa fa-check"></i><b>5.3.1</b> Exercise: Design a Sampling Strategy</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="sampling.html"><a href="sampling.html#additional-reading-sampling"><i class="fa fa-check"></i><b>5.4</b> Additional Reading (Sampling)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Statistics for Soil Survey - Part 1</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="intro" class="section level1 hasAnchor" number="1">
<h1><span class="header-section-number">Chapter 1</span> Introduction to R<a href="intro.html#intro" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><img src="static-figures/logo.jpg" /></p>
<div id="outline" class="section level2 hasAnchor" number="1.1">
<h2><span class="header-section-number">1.1</span> Outline<a href="intro.html#outline" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li>Course Overview
<ol style="list-style-type: decimal">
<li>Review Course Objectives</li>
<li>Why is this training needed?</li>
<li>Why is course organized this way?</li>
</ol></li>
<li>What is R?
<ol style="list-style-type: decimal">
<li>Why should I use R?</li>
<li>What can R do?</li>
</ol></li>
<li>How do I get started?
<ol style="list-style-type: decimal">
<li>RStudio interface</li>
<li>What are packages?</li>
<li>How to navigate the Help tab</li>
<li>How to save files</li>
</ol></li>
<li>Manipulating data
<ol style="list-style-type: decimal">
<li>Loading &amp; viewing data</li>
<li>Filtering, transforming, merging, aggregating and reshaping data</li>
<li>Exporting data</li>
</ol></li>
</ol>
</div>
<div id="course-overview" class="section level2 hasAnchor" number="1.2">
<h2><span class="header-section-number">1.2</span> Course Overview<a href="intro.html#course-overview" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="course-objectives" class="section level3 hasAnchor" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> Course Objectives<a href="intro.html#course-objectives" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Develop solutions to investigate soil survey correlation problems and update activities.</li>
<li>Evaluate investigations for interpretive results and determine how to proceed.</li>
<li>Summarize data for population in NASIS.</li>
<li>Analyze spatial data to investigate soil-landscape relationships</li>
<li>Help to pursue the question “why”</li>
</ul>
</div>
<div id="why-is-this-training-needed" class="section level3 hasAnchor" number="1.2.2">
<h3><span class="header-section-number">1.2.2</span> Why is this training needed?<a href="intro.html#why-is-this-training-needed" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Long standing goal of the Soil Science Division to have a course in statistics <span class="citation">(<a href="#ref-mausbach2003" role="doc-biblioref">Mausbach 2003</a>)</span></li>
<li>Opportunities to learn these techniques are limited, especially at the undergraduate level <span class="citation">(<a href="#ref-hennemann2004" role="doc-biblioref">Hennemann and Rossiter 2004</a>)</span></li>
<li>Consistent methodology (data analysis, data population, sampling design, etc.)</li>
<li>There is continually a greater need to use these techniques:
<ul>
<li>Mapping of lands at high production rates (<span class="citation">(<a href="#ref-macmillan2007" role="doc-biblioref">MacMillan, Moon, and Coupé 2007</a>)</span>; <span class="citation">(<a href="#ref-kempen2012" role="doc-biblioref">Kempen et al. 2012</a>)</span>; <span class="citation">(<a href="#ref-brevik2016" role="doc-biblioref">Brevik et al. 2016</a>)</span>)</li>
<li>Ecological Sites <span class="citation">(<a href="#ref-maynard2019" role="doc-biblioref">Maynard et al. 2019</a>)</span></li>
<li>Soil survey refinement (disaggregation) (<span class="citation">Chaney et al. (<a href="#ref-chaney2016" role="doc-biblioref">2016</a>)</span>];<span class="citation">(<a href="#ref-ramcharan2018" role="doc-biblioref">Ramcharan et al. 2018</a>)</span>)</li>
</ul></li>
</ul>
</div>
<div id="why-is-course-organized-this-way" class="section level3 hasAnchor" number="1.2.3">
<h3><span class="header-section-number">1.2.3</span> Why is course organized this way?<a href="intro.html#why-is-course-organized-this-way" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Our best judgment for assembling into <strong>24</strong> hours what could be <strong>6</strong> University level courses</li>
<li>Mixture of slides and script enabled web pages is new for NRCS</li>
<li>The web content is a long-term investment and should serve as a permanent reference</li>
<li>Feel free to provide guidance for improving the class for future offerings</li>
</ul>
</div>
</div>
<div id="what-is-r" class="section level2 hasAnchor" number="1.3">
<h2><span class="header-section-number">1.3</span> What is R?<a href="intro.html#what-is-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R is a free, open-source software and programming language developed in 1995 at the University of Auckland as an environment for statistical computing and graphics <span class="citation">(<a href="#ref-ihaka1996" role="doc-biblioref">Ihaka and Gentleman 1996</a>)</span>. Since then R has become one of the dominant software environments for data analysis and is used by a variety of scientific disiplines, including soil science, ecology, and geoinformatics (<a href="https://cran.r-project.org/web/views/Environmetrics.html">Envirometrics CRAN Task View</a>; <a href="https://cran.r-project.org/web/views/Spatial.html">Spatial CRAN Task View</a>). R is particularly popular for its graphical capabilities, but it is also prized for it’s GIS capabilities which make it relatively easy to generate raster-based models. More recently, R has also gained several packages which are designed specifically for analyzing soil data.</p>
<ol style="list-style-type: decimal">
<li>a software <strong>environment</strong>:
<ul>
<li>statistics</li>
<li>graphics</li>
<li>programming</li>
<li>calculator</li>
<li>GIS</li>
</ul></li>
<li>a <strong>language</strong> to explore, summarize, and model data
<ul>
<li>functions = verbs</li>
<li>objects = nouns</li>
</ul></li>
</ol>
<p></br></p>
<p><img src="static-figures/rproject.png" style="width:80.0%" /></p>
<p></br></p>
<div id="why-should-i-learn-r" class="section level3 hasAnchor" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> Why Should I Learn R?<a href="intro.html#why-should-i-learn-r" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>While the vast majority of people use Microsoft Excel for data analysis, R offers numerous advantages, such as:</p>
<ol style="list-style-type: decimal">
<li><p>Cost. R is free! <a href="https://www.gnu.org/philosophy/free-sw.html">(“Free as in free speech, not free beer.”)</a></p></li>
<li><p><a href="http://christophergandrud.github.io/RepResR-RStudio/">Reproducible Research</a> (<em>self-documenting, repeatable</em>)</p>
<ul>
<li>repeatable:
<ul>
<li>code + output in a single document <em>(‘I want the right answer, not a quick answer’ - Paul Finnell)</em></li>
<li>easier the next time (<a href="https://www.youtube.com/watch?time_continue=1&amp;v=s3JldKoA0zw">humorous example</a>)</li>
<li>numerous Excel horror stories of scientific studies gone wrong exist (<a href="https://www.youtube.com/watch?v=dXKbkpilQME">TED Talk</a>)</li>
</ul></li>
<li>scalable: applicable to small or large problems</li>
</ul></li>
<li><p>R in a Community</p>
<ul>
<li><a href="https://cran.r-project.org/web/views/">Numerous Discipline Specific R Groups</a></li>
<li><a href="https://jumpingrivers.github.io/meetingsR/r-user-groups.html#north-america">Numerous Local R User Groups (including R-Ladies Groups)</a></li>
<li><a href="https://stackoverflow.com/">Stack Overflow</a></li>
</ul></li>
<li><p>Learning Resources <em>(quantity and quality)</em></p>
<ul>
<li><a href="https://www.r-project.org/doc/bib/R-books.html">R books</a></li>
<li><a href="https://bookdown.org/">(Free Online) R Books</a></li>
</ul></li>
<li><p>R is ‘becoming’ the new norm (paradigm shift?) “If we don’t accept these challenges, others who are less qualified will; and soil scientists will be displaced by apathy.” <span class="citation">(<a href="#ref-arnold1991" role="doc-biblioref">Arnold and Wilding 1991</a>)</span></p></li>
</ol>
<p>While some people find the use of a commandline environment daunting, it is becoming a necessary skill for scientists as the volume and variety of data has grown. Thus scripting or programming has become a third language for many scientists, in addition to their native language and disipline specific terminology. Other popular programming languages include: SQL (i.e. NASIS), Python (i.e. ArcGIS), and JavaScript.</p>
<p></br></p>
<div class="figure">
<img src="static-figures/triangle.png" style="width:50.0%" alt="" />
<p class="caption"><em>ODBC and GDAL link R to nearly all possible formats/interfaces</em></p>
</div>
<p></br></p>
</div>
<div id="what-can-r-do" class="section level3 hasAnchor" number="1.3.2">
<h3><span class="header-section-number">1.3.2</span> What can R do?<a href="intro.html#what-can-r-do" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
<div id="packages" class="section level3 hasAnchor" number="1.3.3">
<h3><span class="header-section-number">1.3.3</span> Packages<a href="intro.html#packages" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Base R (<em>functionality is extended through packages</em>)
<ul>
<li>basic summaries of quantitative or qualitative data</li>
<li>data exploration via graphics</li>
<li><a href="https://cran.r-project.org/web/views/Spatial.html">GIS</a> data processing and analysis</li>
</ul></li>
<li>Soil Science R Packages
<ul>
<li><a href="https://github.com/ncss-tech/aqp">aqp</a> - visualization, aggregation, classification</li>
<li><a href="https://github.com/ncss-tech/soilDB">soilDB</a> - access to commonly used soil databases</li>
<li><a href="https://github.com/ncss-tech/soilReports">soilReports</a> - handful of report templates</li>
<li><a href="http://soiltexture.r-forge.r-project.org/">soiltexture</a> - textural triangles</li>
</ul></li>
<li><a href="https://cran.r-project.org/web/views/Environmetrics.html">Ecology</a> R packages
<ul>
<li><a href="http://vegan.r-forge.r-project.org/">vegan</a> - ordination, diversity analysis, etc.</li>
<li><a href="http://rspatial.org/sdm/">dismo</a> - species distribution modeling</li>
</ul></li>
</ul>
<div id="soil-science-applications" class="section level4 hasAnchor" number="1.3.3.1">
<h4><span class="header-section-number">1.3.3.1</span> Soil Science Applications<a href="intro.html#soil-science-applications" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="create-maps" class="section level5 hasAnchor" number="1.3.3.1.1">
<h5><span class="header-section-number">1.3.3.1.1</span> Create Maps<a href="intro.html#create-maps" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p><img src="static-figures/ssurgo_timeline.png" style="width:80.0%" /></p>
</div>
<div id="draw-soil-profiles" class="section level5 hasAnchor" number="1.3.3.1.2">
<h5><span class="header-section-number">1.3.3.1.2</span> Draw Soil Profiles<a href="intro.html#draw-soil-profiles" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p><img src="s4ssbook_files/figure-html/unnamed-chunk-13-1.png" width="960" style="display: block; margin: auto;" /></p>
</div>
<div id="draw-depth-plots" class="section level5 hasAnchor" number="1.3.3.1.3">
<h5><span class="header-section-number">1.3.3.1.3</span> Draw Depth Plots<a href="intro.html#draw-depth-plots" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p><img src="s4ssbook_files/figure-html/unnamed-chunk-14-1.png" width="960" style="display: block; margin: auto;" /></p>
</div>
<div id="estimate-the-range-in-characteristics-ric" class="section level5 hasAnchor" number="1.3.3.1.4">
<h5><span class="header-section-number">1.3.3.1.4</span> Estimate the Range in Characteristics (RIC)<a href="intro.html#estimate-the-range-in-characteristics-ric" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<table>
<thead>
<tr class="header">
<th align="left">variable</th>
<th align="left">genhz</th>
<th align="right">pct10</th>
<th align="right">median</th>
<th align="right">pct90</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">clay</td>
<td align="left">A</td>
<td align="right">13</td>
<td align="right">16</td>
<td align="right">22</td>
</tr>
<tr class="even">
<td align="left">clay</td>
<td align="left">BAt</td>
<td align="right">16</td>
<td align="right">19</td>
<td align="right">25</td>
</tr>
<tr class="odd">
<td align="left">clay</td>
<td align="left">Bt1</td>
<td align="right">18</td>
<td align="right">24</td>
<td align="right">32</td>
</tr>
<tr class="even">
<td align="left">clay</td>
<td align="left">Bt2</td>
<td align="right">22</td>
<td align="right">30</td>
<td align="right">44</td>
</tr>
<tr class="odd">
<td align="left">clay</td>
<td align="left">Cr</td>
<td align="right">15</td>
<td align="right">15</td>
<td align="right">15</td>
</tr>
<tr class="even">
<td align="left">phfield</td>
<td align="left">A</td>
<td align="right">6</td>
<td align="right">6</td>
<td align="right">7</td>
</tr>
<tr class="odd">
<td align="left">phfield</td>
<td align="left">BAt</td>
<td align="right">5</td>
<td align="right">6</td>
<td align="right">6</td>
</tr>
<tr class="even">
<td align="left">phfield</td>
<td align="left">Bt1</td>
<td align="right">5</td>
<td align="right">6</td>
<td align="right">7</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="rstudio-an-integrated-development-environment-ide-for-r" class="section level2 hasAnchor" number="1.4">
<h2><span class="header-section-number">1.4</span> RStudio: An Integrated Development Environment (IDE) for R<a href="intro.html#rstudio-an-integrated-development-environment-ide-for-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>RStudio is an integrated development environment (IDE) that allows you to interact with R more readily. RStudio is similar to the standard RGui, but is considerably more user friendly. It has more drop-down menus, windows with multiple tabs, and many customization options. The first time you open RStudio, you will see three windows. A forth window is hidden by default, but can be opened by clicking the <strong>File</strong> drop-down menu, then <strong>New File,</strong> and then <strong>R Script</strong>. Detailed information on using RStudio can be found at at <a href="https://support.rstudio.com/hc/en-us/sections/200107586-Using-RStudio">RStudio’s Website</a>.</p>
<p><img src="static-figures/ch1_rstudio2.png" /></p>
<table>
<colgroup>
<col width="28%" />
<col width="15%" />
<col width="55%" />
</colgroup>
<thead>
<tr class="header">
<th>RStudio Windows / Tabs</th>
<th>Location</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Console Window</td>
<td>lower-left</td>
<td>location were commands are entered and the output is printed</td>
</tr>
<tr class="even">
<td>Source Tabs</td>
<td>upper-left</td>
<td>built-in text editor</td>
</tr>
<tr class="odd">
<td>Environment Tab</td>
<td>upper-right</td>
<td>interactive list of loaded R objects</td>
</tr>
<tr class="even">
<td>History Tab</td>
<td>upper-right</td>
<td>list of key strokes entered into the Console</td>
</tr>
<tr class="odd">
<td>Files Tab</td>
<td>lower-right</td>
<td>file explorer to navigate C drive folders</td>
</tr>
<tr class="even">
<td>Plots Tab</td>
<td>lower-right</td>
<td>output location for plots</td>
</tr>
<tr class="odd">
<td>Packages Tab</td>
<td>lower-right</td>
<td>list of installed packages</td>
</tr>
<tr class="even">
<td>Help Tab</td>
<td>lower-right</td>
<td>output location for help commands and help search window</td>
</tr>
<tr class="odd">
<td>Viewer Tab</td>
<td>lower-right</td>
<td>advanced tab for local web content</td>
</tr>
</tbody>
</table>
</div>
<div id="rcmdr-r-commander-a-graphical-user-interface-for-r" class="section level2 hasAnchor" number="1.5">
<h2><span class="header-section-number">1.5</span> Rcmdr (R Commander): A Graphical User Interface for R<a href="intro.html#rcmdr-r-commander-a-graphical-user-interface-for-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>While we recommend the use of RStudio for some of the reasons listed above, many people new to R (or infrequent users) might benefit from a graphical user interface (GUI) that allows the user to run basic functions using a point and click interface.</p>
<p>Luckily for beginners R has the R Commander (Rcmdr) GUI, which is similiar to <a href="https://www.jmp.com/en_us/learning-library/using-jmp.html">JMP</a>. Rcmdr was created by <a href="http://socserv.socsci.mcmaster.ca/jfox/Misc/Rcmdr/index.html">John Fox</a> for his introductory statistics students so they could see how the software worked without learning a large number of function names and arguments. Rcmdr is a great way to begin familiarizing yourself with R and statistics within a GUI environment.</p>
<p>Regrettably, we know of no GUI that allows users to perform the majority of soil survey applications demonstrated in this course, and thus Rcmdr will not be covered. For those who wish to pursue Rcmdr, alternative instructions can be viewed at <a href="http://gchang.people.ysu.edu/r/R_Instructions.htm">Andy Chang &amp; G. Jay Kerns website</a>.</p>
<p>To take a quick peak at Rcmdr, it can be opened by <strong>entering</strong> the following command into the R console.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r codeBlocks"><code class="sourceCode r"><span id="cb7-1"><a href="intro.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;Rcmdr&quot;</span>)</span>
<span id="cb7-2"><a href="intro.html#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Rcmdr)</span></code></pre></div>
<p><img src="static-figures/ch1_rcmdr.png" /></p>
</div>
<div id="r-basics" class="section level2 hasAnchor" number="1.6">
<h2><span class="header-section-number">1.6</span> R basics<a href="intro.html#r-basics" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><p>R is command-line driven. It requires you to type or copy-and-paste commands after a command prompt (&gt;) that appears when you open R. This is called the “Read-Eval-Print-Loop” or REPL. After typing a command in the R console and pressing <strong>Enter</strong> on your keyboard, the command will run.</p></li>
<li><p>If your command is not complete, R issues a continuation prompt (signified by a plus sign: <code>+</code>).</p></li>
<li><p>R is case sensitive. Make sure your spelling and capitalization are correct.</p></li>
<li><p>Commands in R are also called functions. The basic format of a function in R is: <code>object &lt;- function.name(argument_1 = data, argument_2 = TRUE)</code>.</p></li>
<li><p>The up arrow (^) on your keyboard can be used to bring up previous commands that you’ve typed in the R console.</p></li>
<li><p>Any text that you do not want R to act on (such as comments, notes, or instructions) needs to be preceded by the <code>#</code> symbol (a.k.a. hash-tag, comment, pound, or number symbol). R ignores the remainder of the script line following <code>#</code>.</p></li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r codeBlocks"><code class="sourceCode r"><span id="cb8-1"><a href="intro.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Math</span></span>
<span id="cb8-2"><a href="intro.html#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb8-3"><a href="intro.html#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="sc">*</span> <span class="dv">10</span></span>
<span id="cb8-4"><a href="intro.html#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="fu">log10</span>(<span class="dv">100</span>)</span>
<span id="cb8-5"><a href="intro.html#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="intro.html#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co"># combine values</span></span>
<span id="cb8-7"><a href="intro.html#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb8-8"><a href="intro.html#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="intro.html#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Create sequence of values</span></span>
<span id="cb8-10"><a href="intro.html#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb8-11"><a href="intro.html#cb8-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-12"><a href="intro.html#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Implicit looping</span></span>
<span id="cb8-13"><a href="intro.html#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span> <span class="sc">*</span> <span class="dv">5</span></span>
<span id="cb8-14"><a href="intro.html#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span> <span class="sc">*</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb8-15"><a href="intro.html#cb8-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-16"><a href="intro.html#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Assignment and data types</span></span>
<span id="cb8-17"><a href="intro.html#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="do">## numeric</span></span>
<span id="cb8-18"><a href="intro.html#cb8-18" aria-hidden="true" tabindex="-1"></a>clay <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">12</span>, <span class="dv">15</span>, <span class="dv">26</span>, <span class="dv">30</span>)</span>
<span id="cb8-19"><a href="intro.html#cb8-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-20"><a href="intro.html#cb8-20" aria-hidden="true" tabindex="-1"></a><span class="do">## character</span></span>
<span id="cb8-21"><a href="intro.html#cb8-21" aria-hidden="true" tabindex="-1"></a>subgroup <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;typic haplocryepts&quot;</span>,<span class="st">&quot;andic haplocryepts&quot;</span>,<span class="st">&quot;typic dystrocryepts&quot;</span>)</span>
<span id="cb8-22"><a href="intro.html#cb8-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-23"><a href="intro.html#cb8-23" aria-hidden="true" tabindex="-1"></a><span class="do">## logical</span></span>
<span id="cb8-24"><a href="intro.html#cb8-24" aria-hidden="true" tabindex="-1"></a>andic <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">TRUE</span> ,<span class="cn">FALSE</span>)</span>
<span id="cb8-25"><a href="intro.html#cb8-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-26"><a href="intro.html#cb8-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Print</span></span>
<span id="cb8-27"><a href="intro.html#cb8-27" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(clay)</span>
<span id="cb8-28"><a href="intro.html#cb8-28" aria-hidden="true" tabindex="-1"></a>subgroup</span></code></pre></div>
</div>
<div id="managing-packages" class="section level2 hasAnchor" number="1.7">
<h2><span class="header-section-number">1.7</span> Managing Packages<a href="intro.html#managing-packages" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Packages are collections of additional functions that can be loaded on demand. They commonly include example data that can be used to demonstrate those functions. Although R comes with many common statistical functions and models, most of our work requires additional packages.</p>
<div id="installing-packages" class="section level3 hasAnchor" number="1.7.1">
<h3><span class="header-section-number">1.7.1</span> Installing Packages<a href="intro.html#installing-packages" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To use a package, you must first install it and then load it. These steps can be done at the command line or using the Packages Tab. Examples of both approaches are provided below. R packages only need to be installed once (until R is upgraded or re-installed). Every time you start a new R session, however, you need to load every package that you intend to use in that session.</p>
<p>Within the <strong>Packages</strong> tab you will see a list of all the packages currently installed on your computer, and 2 buttons labeled either “Install” or “Update”. To install a new package simply select the <strong>Install</strong> button. You can enter install one or more than one packages at a time by simply separating them with a comma.</p>
<p><img src="static-figures/ch1_package_window.png" /></p>
<p><img src="static-figures/ch1_install_example.png" /></p>
<p>To find out what packages are installed on your computer, use the following commands:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r codeBlocks"><code class="sourceCode r"><span id="cb9-1"><a href="intro.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>() </span>
<span id="cb9-2"><a href="intro.html#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="intro.html#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb9-4"><a href="intro.html#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="intro.html#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="fu">installed.packages</span>()</span></code></pre></div>
<p>One useful package for soil scientists is the <code>soiltexture</code> package. It allows you to plot soil textural triangles. The following command shows how to install this package if you do not currently have it downloaded:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r codeBlocks"><code class="sourceCode r"><span id="cb10-1"><a href="intro.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># CRAN (static version)</span></span>
<span id="cb10-2"><a href="intro.html#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">&quot;soiltexture&quot;</span>))</span>
<span id="cb10-3"><a href="intro.html#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="intro.html#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># GitHub (development version)</span></span>
<span id="cb10-5"><a href="intro.html#cb10-5" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;julienmoeys/soiltexture/pkg/soiltexture&quot;</span>, <span class="at">dependencies =</span> <span class="cn">FALSE</span>, <span class="at">upgrade =</span> <span class="cn">FALSE</span>, <span class="at">build =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<div id="loading-packages" class="section level3 hasAnchor" number="1.7.2">
<h3><span class="header-section-number">1.7.2</span> Loading Packages<a href="intro.html#loading-packages" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Once a package is installed, it must be loaded into the R session to be used.
This can be done by using <code>library()</code>. The package name does not need to be quoted.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r codeBlocks"><code class="sourceCode r"><span id="cb11-1"><a href="intro.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(soilDB)</span></code></pre></div>
<p><img src="static-figures/ch1_load_packages.png" style="width:60.0%" /></p>
<p>You can also load packages using the <strong>Packages Tab</strong>, by <strong>checking</strong> the box next to the package name. For example, documentation for the soilDB package is available from the <code>help()</code> function.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r codeBlocks"><code class="sourceCode r"><span id="cb12-1"><a href="intro.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="at">package =</span> <span class="st">&quot;soilDB&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="getting-help" class="section level2 hasAnchor" number="1.8">
<h2><span class="header-section-number">1.8</span> Getting Help<a href="intro.html#getting-help" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R has <a href="https://cran.r-project.org/manuals.html">extensive documentation</a>, numerous <a href="https://www.r-project.org/mail.html">mailing lists</a>, and <a href="https://www.r-project.org/doc/bib/R-books.html">countless books</a> (many of which are free and listed at end of each chapter for this course).</p>
<p>To learn more about the function you are using and the options and arguments available, learn to help yourself by taking advantage of some of the following help functions in RStudio:</p>
<ol style="list-style-type: decimal">
<li>Use the Help tab in the lower-right Window to search commands (such as hist) or topics (such as histogram).</li>
</ol>
<p><img src="static-figures/ch1_help_tab.png" /></p>
<ol start="2" style="list-style-type: decimal">
<li>Type <code>help(read.csv) or ?read.csv</code> in the Console window to bring up a help page. Results will appear in the Help tab in the lower right-hand window. Certain functions may require quotations, such as <code>help("+")</code>.</li>
</ol>
<div class="sourceCode" id="cb13"><pre class="sourceCode r codeBlocks"><code class="sourceCode r"><span id="cb13-1"><a href="intro.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Help file for a function</span></span>
<span id="cb13-2"><a href="intro.html#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(read.csv) <span class="co"># or ?read.csv</span></span>
<span id="cb13-3"><a href="intro.html#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="intro.html#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Help files for a package</span></span>
<span id="cb13-5"><a href="intro.html#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="at">package =</span> <span class="st">&quot;soiltexture&quot;</span>)</span></code></pre></div>
</div>
<div id="documenting-your-work" class="section level2 hasAnchor" number="1.9">
<h2><span class="header-section-number">1.9</span> Documenting your work<a href="intro.html#documenting-your-work" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>RStudio’s Source Tabs serve as a built-in text editor. Prior to executing R functions at the Console, commands are typically written down (or scripted). Scripting is essentially showing your work.</p>
<p>The sequence of functions necessary to complete a task are scripted in order to document or automate a task.</p>
<p>While scripting may seems cumbersome at first, it ultimately saves time in the long run, particularly for repetitive tasks (<a href="https://www.youtube.com/watch?time_continue=1&amp;v=s3JldKoA0zw">humorous YouTube Video on Scripting</a>).</p>
<p>Benefits include:</p>
<ul>
<li>allows others to reproduce your work, which is the foundation of science</li>
<li>serves as instruction/reminder on how to perform a task</li>
<li>allows rapid iteration, which saves time and allows the evaluation of incremental changes</li>
<li>reduces the chance of human error</li>
</ul>
<div id="basic-tips-for-scripting" class="section level3 hasAnchor" number="1.9.1">
<h3><span class="header-section-number">1.9.1</span> Basic Tips for Scripting<a href="intro.html#basic-tips-for-scripting" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To write a script, simply open a new R script file by clicking <strong>File&gt;New File&gt;R Script</strong>. Within the text editor <strong>type</strong> out a sequence of functions.</p>
<ul>
<li>Place each function (e.g. <code>read.csv()</code>) on a separate line.</li>
<li>If a function has a long list of arguments, place each argument on a separate line.</li>
<li>A command can be excuted from the text editor by placing the cursor on a line and typing <strong>Crtl + Enter</strong>, or by <strong>clicking</strong> the Run button.</li>
<li>An entire R script file can be excuted by <strong>clicking</strong> the Source button.</li>
</ul>
<p><img src="static-figures/ch1_text_editor.png" /></p>
</div>
</div>
<div id="organizing-your-work" class="section level2 hasAnchor" number="1.10">
<h2><span class="header-section-number">1.10</span> Organizing your work<a href="intro.html#organizing-your-work" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>When you first begin a project you should create a new folder and place within it all the data and code associated with the project. This simplifies the process of accessing your files from R. Using a project folder is also a good habit because it makes it easier to pickup where you left off and find your data if you need to come back to it later. Within R, your project folder is also known as your working directory. This directory will be the default location your plots and other R output are saved.</p>
<p>You want to have inputs for your code in the working directory so that you can refer to them using <a href="https://excelquick.com/r-programming/importing-data-absolute-and-relative-file-paths-in-r/">relative file paths</a>. Relative file paths make it easier if you move the folder containing your script(s) around. Or, if you share it with someone else, they will have little issue getting your code to work on their own file system.</p>
<div id="setting-the-working-directory" class="section level3 hasAnchor" number="1.10.1">
<h3><span class="header-section-number">1.10.1</span> Setting the Working Directory<a href="intro.html#setting-the-working-directory" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Before you begin working in R, you should set your working directory to your project folder; for example, <code>setwd("C:\\workspace2\\projectx...")</code>. You can use RStudio to manage your projects and folders.</p>
<p><strong>NOTE:</strong> <em>Beware when specifying any file paths</em> that <strong>R</strong> uses forward slashes <code>/</code> instead of back slashes <code>\</code>. Back slashes are reserved for use as an <a href="https://en.wikipedia.org/wiki/Escape_character">escape character</a>, so you must use two of them to get one in result character string.</p>
<p>To change the working directory in RStudio, select main menu <strong>Session &gt;&gt; Set Working Directory &gt;&gt; …</strong>. Or, from the “Files” tab click <strong>More &gt;&gt; Set As Working Directory</strong> to use the <em>current location of the “Files” tab</em> as your working directory.</p>
<p><img src="static-figures/ch1_setwd.png" /></p>
<p>Setting the working directory can also be done via the Console with the <code>setwd()</code> command:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r codeBlocks"><code class="sourceCode r"><span id="cb14-1"><a href="intro.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;C:/workspace2&quot;</span>)</span></code></pre></div>
<p>To check the file path of the current working directory (which should now be <code>"C:\\workspace2"</code>), type:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r codeBlocks"><code class="sourceCode r"><span id="cb15-1"><a href="intro.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span></code></pre></div>
</div>
<div id="rstudio-projects-.rproj-files" class="section level3 hasAnchor" number="1.10.2">
<h3><span class="header-section-number">1.10.2</span> RStudio Projects (.Rproj files)<a href="intro.html#rstudio-projects-.rproj-files" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can also manage your working directory using RStudio Projects. An RStudio Project file (<em>.Rproj</em>) is analogous to, for example, a <em>.mxd</em> file for ArcMap. It contains information about the specific settings you may have set for a “project”.</p>
<p>You open or create projects using the drop down menu in the top right-hand corner of the RStudio window (<em>shown below</em>)</p>
<div class="figure">
<img src="static-figures/rstudio_projectdropdown.png" alt="" />
<p class="caption">RStudio Project Menu</p>
</div>
<p>Here is what a typical Project drop-down menu looks like:</p>
<div class="figure">
<img src="static-figures/rstudio_projectdropdown2.png" alt="" />
<p class="caption">RStudio Project Menu (expanded)</p>
</div>
<ul>
<li><p>You can create new projects from existing or new directories with “New Project…”.</p></li>
<li><p>When you click “Open Project…”, your working directory is <em>automatically set to the .Rproj file’s location</em> – this is <em>extremely</em> handy</p></li>
<li><p>Any projects you have created/used recently will show up in the “Project List”</p></li>
</ul>
<!-- Too much for first chapter...
### More RStudio Project Features

Another neat thing about using Projects is that RStudio will provide additional tabs depending on the contents of your working directory. 

For example, if your project folder contains a Git repository (_.git_ hidden directory), a Git tab (_below image, left_) is available for version control. Also, if the directory contains source code for an R package, the "Build" tab  (_below image, right_) provides commands from the `devtools` package. 

![RStudio Projects - Git Repository and Build Tabs](static-figures/rstudio_projecttabs.png) -->
</div>
</div>
<div id="saving-your-work" class="section level2 hasAnchor" number="1.11">
<h2><span class="header-section-number">1.11</span> Saving your work<a href="intro.html#saving-your-work" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In R, you can save several types of files to keep track of the work you do. The file types include: workspace, script, history, and graphics. It is important to save often because R, like any other software, may crash periodically.</p>
<p>Such problems are especially likely when working with large files. You can save your workspace in R via the command line or the File menu.</p>
<div id="r-script-.r" class="section level4 hasAnchor" number="1.11.0.1">
<h4><span class="header-section-number">1.11.0.1</span> R script (.R)<a href="intro.html#r-script-.r" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>An R script is simply a text file of R commands that you’ve typed.</p>
<p>You may want to save your scripts (whether they were written in R Editor or another program such as Notepad) so that you can reference them in the future, edit them as needed, and keep track of what you’ve done.</p>
<p>To save R scripts in RStudio, simply <strong>click the save button</strong> from your R script tab. Save scripts with the .R extension.</p>
<p>R assumes that script files are saved with only that extension. If you are using another text editor, you won’t need to worry about saving your scripts in R. You can open text files in the RStudio text editor, but beware copying and pasting from Word files as discussed below.</p>
<p><img src="static-figures/ch1_save_script.png" /></p>
<p>To open an R script, <strong>click the file icon</strong>.</p>
<p><img src="static-figures/ch1_file_icon.png" /></p>
</div>
<div id="microsoft-word-files" class="section level4 hasAnchor" number="1.11.0.2">
<h4><span class="header-section-number">1.11.0.2</span> Microsoft Word Files<a href="intro.html#microsoft-word-files" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Using Microsoft Word to write or save R scripts is generally a bad idea.</p>
<p>Certain keyboard characters, such as quotations ““, are not stored the same in Word (e.g. they are”left” and “right” handed). The difference is hard to distinguish, but will not run in R.</p>
<p>Also, pasting your R code or output into Wword documents manually is not reproducible, so while it may work in a pinch, it ultimately costs you time.</p>
<p>You can use the <code>word_document</code> Rmarkdown template to automatically “Knit” <code>.docx</code> files from R code using a template, which is very handy for quickly getting a nice looking document!</p>
</div>
<div id="r-markdown-.rmd" class="section level4 hasAnchor" number="1.11.0.3">
<h4><span class="header-section-number">1.11.0.3</span> R Markdown (.Rmd)<a href="intro.html#r-markdown-.rmd" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>R Markdown (.Rmd) documents contain information for the reproducible combination of narrative text and code to produce elegantly formatted output. You can use multiple languages in .Rmd documents including R, Python, and SQL. You can easily “knit” visually appealing and high-quality documents into rich HTML, PDF or Word documents from the RStudio interface.</p>
<p>This document is made in bookdown, a variant of rmarkdown used for book templates involving multiple chapters. You can make blogs and websites for your R packages with blogdown and pkgdown. These are all tools based off of the powerful “pandoc” engine and the tools in the R Markdown ecosystem.</p>
<!--
## This is not something we should encourage people to do. Not reproducible. We tell them to turn off this "feature" in the pre-course and I sure hope they do because it is a monstrous waste of their and our debugging time. 
## History is the only thing they should save, unless they explicitly are selecting the objects to save and using e.g. save(), saveRDS() / load() etc. -AGB

#### Workspace (.Rdata)  

The R workspace consists of all the data objects you've created or loaded during your R session. When you quit R by either typing `q()` or exiting out of the application window, R will prompt you to save your workspace.

If you choose yes, R saves a file named .RData to your working directory. The next time you open R and reload your .Rdata workspace, all of your data objects will be available in R and all of the commands that you've typed will be accessible by using the up-arrow and down-arrow keys on your keyboard. 

You can also save or load your workspace at any time during your R session from the menu by clicking **Session>Save Workspace As..**, or the save button on the **Environment Tab**.   

![](static-figures/ch1_save_workspace.png)    

The R command for saving your workspace is:


```{.r .codeBlocks}
save.image(file="workspace.RData")
```
-->
</div>
<div id="r-history-.rhistory" class="section level4 hasAnchor" number="1.11.0.4">
<h4><span class="header-section-number">1.11.0.4</span> R history (.Rhistory)<a href="intro.html#r-history-.rhistory" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>An R history file is a copy of all your key strokes. You can think of it as brute force way of saving your work. It can be useful if you didn’t document all your steps in an R script file.</p>
<p>Like an R file, an Rhistory file is simply a text file that lists all of the commands that you’ve executed. It does not keep a record of the results.</p>
<p>To load or save your R history from the History Tab click the <strong>Open File</strong> or <strong>Save</strong> button. If you load an Rhistory file, your previous commands will again become available with the up-arrow and down-arrow keys.</p>
<p><img src="static-figures/ch1_save_history.png" /></p>
<p>You can also use the command line to load or save your history.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r codeBlocks"><code class="sourceCode r"><span id="cb16-1"><a href="intro.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">savehistory</span>(<span class="at">file =</span> <span class="st">&quot;sand.Rhistory&quot;</span>)  </span>
<span id="cb16-2"><a href="intro.html#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">loadhistory</span>(<span class="at">file =</span> <span class="st">&quot;sand.Rhistory&quot;</span>)  </span>
<span id="cb16-3"><a href="intro.html#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">history</span>(<span class="at">max.show=</span><span class="cn">Inf</span>) <span class="co">#displays all previous commands</span></span></code></pre></div>
</div>
<div id="r-graphics" class="section level4 hasAnchor" number="1.11.0.5">
<h4><span class="header-section-number">1.11.0.5</span> R Graphics<a href="intro.html#r-graphics" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Graphic outputs can be saved in various formats.</p>
<table>
<thead>
<tr class="header">
<th align="left">Format</th>
<th align="left">Function</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">pdf</td>
<td align="left">pdf(“graphic.pdf”)</td>
</tr>
<tr class="even">
<td align="left">window metafile</td>
<td align="left">win.metafile(“graphic.wmf”)</td>
</tr>
<tr class="odd">
<td align="left">png</td>
<td align="left">png(“graph.png”)</td>
</tr>
<tr class="even">
<td align="left">jpeg</td>
<td align="left">jpeg(“graph.jpg”)</td>
</tr>
<tr class="odd">
<td align="left">bmp</td>
<td align="left">bmp(“graph.bmp”)</td>
</tr>
<tr class="even">
<td align="left">postscript</td>
<td align="left">postscript(“graph.ps”)</td>
</tr>
</tbody>
</table>
<p>To save a graphic: (1) Click the <strong>Plots Tab</strong> window, (2) click the <strong>Export</strong> button, (3) <strong>Choose</strong> your desired format, (3) <strong>Modify</strong> the export settings as you desire, and (4) click <strong>Save</strong>.</p>
<p><img src="static-figures/ch1_save_plot.png" /></p>
<p>The R command for saving a graphic is:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r codeBlocks"><code class="sourceCode r"><span id="cb17-1"><a href="intro.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">png</span>(<span class="at">file =</span> <span class="st">&quot;npk_yield.png&quot;</span>)</span>
<span id="cb17-2"><a href="intro.html#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(npk<span class="sc">$</span>yield)</span>
<span id="cb17-3"><a href="intro.html#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
<p>The first line of this command creates a blank file named sand with a JPEG extension. The second line plots the data object that you want to create a graphic of (here it is conveniently the same name as the JPEG file we are creating). The third line closes the graphics device.</p>
</div>
</div>
<div id="exercise-1" class="section level2 hasAnchor" number="1.12">
<h2><span class="header-section-number">1.12</span> Exercise 1<a href="intro.html#exercise-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Using the examples discussed thus far as a guide, demonstrate your mastery of the material by performing the following tasks.</p>
<ol style="list-style-type: decimal">
<li>Create an R script file, demonstrate 3 basic R functions, and comment (<code>#</code>) your code.</li>
<li>Install the FedData R package from CRAN and <a href="https://github.com/ropensci/FedData">GitHub</a>. Save the commands in your R script file.</li>
<li>Load the FedData R package and read the help file for the <code>get_ssurgo</code> function within the FedData package. What is the 1st input/argument? Save the R command in your R script.</li>
<li>Save your R script, and forward to your instructor.</li>
</ol>
</div>
<div id="loading-data" class="section level2 hasAnchor" number="1.13">
<h2><span class="header-section-number">1.13</span> Loading Data<a href="intro.html#loading-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R can load a variety of data formats, however tabular data is by far the most common, and what we will spend of the majority of our time working with. Typically tabular data is stored in spreadsheets (e.g. .txt, .csv, .xlsx), databases (e.g. NASIS), or webpages (.html). Within R tabular data is stored as a <code>data.frame</code>.</p>
<div id="text-files" class="section level4 hasAnchor" number="1.13.0.1">
<h4><span class="header-section-number">1.13.0.1</span> Text files<a href="intro.html#text-files" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Text files are a preferable format for storing and transferring small datasets. One basic command for importing text files into R is <code>read.csv()</code>. The command is followed by the file name or URL and then some optional instructions for how to read the file.</p>
<p>These files can either be imported into R by clicking the <strong>Import Dataset &gt;&gt; From Text</strong> buttons from the Environment tab, or by typing the following command into the R console:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r codeBlocks"><code class="sourceCode r"><span id="cb18-1"><a href="intro.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># from working directory</span></span>
<span id="cb18-2"><a href="intro.html#cb18-2" aria-hidden="true" tabindex="-1"></a>sand <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;C:/workspace2/sand_example.csv&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="sourceCode r codeBlocks"><code class="sourceCode r"><span id="cb19-1"><a href="intro.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># from URL</span></span>
<span id="cb19-2"><a href="intro.html#cb19-2" aria-hidden="true" tabindex="-1"></a>sand <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/ncss-tech/stats_for_soil_survey/master/data/sand_example.csv&quot;</span>) </span></code></pre></div>
<p><img src="static-figures/sand_readcsv.png" /></p>
</div>
<div id="excel-files" class="section level4 hasAnchor" number="1.13.0.2">
<h4><span class="header-section-number">1.13.0.2</span> Excel files<a href="intro.html#excel-files" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>R can import Excel files, but generally speaking it is a bad idea to use Excel. Excel has a dangerous default which automatically converts data with common notations to their standard format without warning or notice. For example, the character “11-JUN” entered into a cell automatically becomes the date 6/11/2021, even though the data is still displayed as 11-JUN. The only way to avoid this default behavior is to manually import your data into Excel via the <strong>Data Tab&gt;Get External Data Ribbon</strong>, and manually set the data type of all your columns to text. Failure to do so has resulted in numerous retracted research articles (<a href="https://www.washingtonpost.com/news/wonk/wp/2016/08/26/an-alarming-number-of-scientific-papers-contain-excel-errors/?utm_term=.9352a35dca6f">Washington Post Article</a>). Warnings aside, Excel files are a very common and are a format most people are familiar with. Therefore we will illustrate how to bring them into R.</p>
<p>Download the sand Excel dataset from GitHub at <a href="https://github.com/ncss-tech/stats_for_soil_survey/blob/master/data/Pre-course/R_sand/sand_example.xlsx">https://github.com/ncss-tech/stats_for_soil_survey/blob/master/data/Pre-course/R_sand/sand_example.xlsx</a></p>
<p>Excel datasets can either be imported into R by clicking the <strong>Import Dataset &gt;&gt; From Excel</strong> buttons from the Environment tab, or by typing the following command into the R console:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r codeBlocks"><code class="sourceCode r"><span id="cb20-1"><a href="intro.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb20-2"><a href="intro.html#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="intro.html#cb20-3" aria-hidden="true" tabindex="-1"></a>sand_example <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;sand_example.xlsx&quot;</span>)</span></code></pre></div>
<p><img src="static-figures/sand_readxl.png" /></p>
</div>
<div id="nasis-web-reports" class="section level4 hasAnchor" number="1.13.0.3">
<h4><span class="header-section-number">1.13.0.3</span> NASIS (Web) Reports<a href="intro.html#nasis-web-reports" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>NASIS provides a plethora of reports, many of which can be read into R for analysis. The <code>soilDB</code> R package provides a series of functions to read data from NASIS either using a local database connection or via HTML web reports. Similar functions also exist for accessing tabular data from Soil Data Access. More details on <code>soilDB</code> will be provided in the next chapter, but now we’ll illustrate how to access some example datasets for manipulating tabular data.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r codeBlocks"><code class="sourceCode r"><span id="cb21-1"><a href="intro.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(soilDB)</span>
<span id="cb21-2"><a href="intro.html#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="intro.html#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co"># get projects</span></span>
<span id="cb21-4"><a href="intro.html#cb21-4" aria-hidden="true" tabindex="-1"></a>prj <span class="ot">&lt;-</span> <span class="fu">get_project_from_NASISWebReport</span>(<span class="at">mlrassoarea =</span> <span class="st">&quot;11-IND&quot;</span>, <span class="at">fiscalyear =</span> <span class="dv">2020</span>)</span>
<span id="cb21-5"><a href="intro.html#cb21-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-6"><a href="intro.html#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="co"># get legends</span></span>
<span id="cb21-7"><a href="intro.html#cb21-7" aria-hidden="true" tabindex="-1"></a>leg <span class="ot">&lt;-</span> <span class="fu">get_legend_from_NASISWebReport</span>(<span class="at">mlraoffice =</span> <span class="st">&quot;Indi%&quot;</span>, <span class="at">areasymbol =</span> <span class="st">&quot;%&quot;</span>)</span>
<span id="cb21-8"><a href="intro.html#cb21-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-9"><a href="intro.html#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="co"># get map units</span></span>
<span id="cb21-10"><a href="intro.html#cb21-10" aria-hidden="true" tabindex="-1"></a>mu  <span class="ot">&lt;-</span> <span class="fu">get_mapunit_from_NASISWebReport</span>(<span class="at">areasymbol =</span> <span class="fu">c</span>(<span class="st">&quot;IN001&quot;</span>, <span class="st">&quot;IN11%&quot;</span>))</span></code></pre></div>
</div>
</div>
<div id="data-manipulation" class="section level2 hasAnchor" number="1.14">
<h2><span class="header-section-number">1.14</span> Data manipulation<a href="intro.html#data-manipulation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Before we can do any sort of analysis, analysis, our data often needs to be manipulated one way or another. Estimates vary, but an analyst typically spend 80% of their time manipulating data, and only 20% actually analyzing or modeling. Tasks generally involve filtering, transforming, merging, aggregating, and reshaping data.</p>
<p>R has many functions and packages for manipulating data frames, but within the past several years a family of packages, known as the <code>tidyverse</code>, have been developed to simplify interacting with data frames (or tibbles). Within the <code>tidyverse</code> the most commonly used packages are <code>dplyr</code> and <code>tidyr</code>. Many of the tidyverse function names are patterned after SQL syntax.</p>
<!--
An important principle of tabular data is that it should be ["normalized'](https://en.wikipedia.org/wiki/Database_normalization) or ["tidy"](https://r4ds.had.co.nz/tidy-data.html). This simply means that rows should hold observations, and columns should hold variables for each observation. 
-->
<p>We will review the most common functions you need to know in order to accomplish the majority of data manipulation tasks.</p>
<div id="viewing-and-removing-data" class="section level3 hasAnchor" number="1.14.1">
<h3><span class="header-section-number">1.14.1</span> Viewing and Removing Data<a href="intro.html#viewing-and-removing-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Once a file is imported, it is imperative that you check to ensure that R correctly imported your data. Make sure numerical data are correctly imported as numerical, that your column headings are preserved, etc. To view the data simply <strong>click</strong> on the mu dataset listed in the Environment tab. This will open up a separate window that displays a spreadsheet like view.</p>
<p><img src="static-figures/ch1_view_dataframe.png" /></p>
<p>Additionally you can use the following functions to view your data in R.</p>
<table>
<thead>
<tr class="header">
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>print()</code></td>
<td>prints the entire object (avoid with large tables)</td>
</tr>
<tr class="even">
<td><code>head()</code></td>
<td>prints the first 6 lines of your data</td>
</tr>
<tr class="odd">
<td><code>str()</code></td>
<td>shows the data structure of an R object</td>
</tr>
<tr class="even">
<td><code>names()</code></td>
<td>lists the column names (i.e., headers) of your data</td>
</tr>
<tr class="odd">
<td><code>ls()</code></td>
<td>lists all the R objects in your workspace directory</td>
</tr>
</tbody>
</table>
<p>Try entering the following commands to view the <code>mu</code> dataset in R:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r codeBlocks"><code class="sourceCode r"><span id="cb22-1"><a href="intro.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mu)</span>
<span id="cb22-2"><a href="intro.html#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="intro.html#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(mu)</span>
<span id="cb22-4"><a href="intro.html#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="intro.html#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mu)</span>
<span id="cb22-6"><a href="intro.html#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="intro.html#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>()</span></code></pre></div>
<p>A data object is anything you’ve created or imported and assigned a name to in R. The Environment tab allows you to see what data objects are in your R session and expand their structure. Right now sand should be the only data object listed. If you wanted to delete all data objects from your R session, you could <strong>click the broom icon</strong> from the Environments tab. Otherwise you could type:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r codeBlocks"><code class="sourceCode r"><span id="cb23-1"><a href="intro.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove all R objects</span></span>
<span id="cb23-2"><a href="intro.html#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>(<span class="at">all =</span> <span class="cn">TRUE</span>)) </span>
<span id="cb23-3"><a href="intro.html#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="intro.html#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove individual objects</span></span>
<span id="cb23-5"><a href="intro.html#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(mu, leg, sand)</span></code></pre></div>
<p><img src="static-figures/ch1_clear_workspace.png" /></p>
</div>
<div id="filtering-or-subsetting-data" class="section level3 hasAnchor" number="1.14.2">
<h3><span class="header-section-number">1.14.2</span> Filtering or Subsetting Data<a href="intro.html#filtering-or-subsetting-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When analyzing data in NASIS, filtering is typically accomplished by loading your selected set with only the records you’re interested in. However, it is often useful or necessary to subset your data after it’s loaded. This can allow you to isolate interesting records within large datasets. For these reasons R has numerous options/functions for filtering data.</p>
<p>Data frames can be filtered by both columns and rows, using either <strong>names</strong>, <strong>position</strong> (e.g. column 1, row 5), or <strong>logical</strong> indices (e.g. <code>TRUE</code>/<code>FALSE</code>). Another particularly useful feature is the use of <strong>pattern matching</strong> which uses regular expressions to select data, which is similar to the <code>LIKE</code> statement from SQL.</p>
<p>**Filtering with names and numerical indices</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r codeBlocks"><code class="sourceCode r"><span id="cb24-1"><a href="intro.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtering with names</span></span>
<span id="cb24-2"><a href="intro.html#cb24-2" aria-hidden="true" tabindex="-1"></a>mu<span class="sc">$</span>areasymbol                             <span class="co"># select column names using $</span></span>
<span id="cb24-3"><a href="intro.html#cb24-3" aria-hidden="true" tabindex="-1"></a>mu[, <span class="fu">c</span>(<span class="st">&quot;areasymbol&quot;</span>, <span class="st">&quot;musym&quot;</span>)]            <span class="co"># select column names using []</span></span>
<span id="cb24-4"><a href="intro.html#cb24-4" aria-hidden="true" tabindex="-1"></a>mu[<span class="fu">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>), ]                         <span class="co"># select row names using []</span></span>
<span id="cb24-5"><a href="intro.html#cb24-5" aria-hidden="true" tabindex="-1"></a>mu[<span class="fu">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>), <span class="fu">c</span>(<span class="st">&quot;areasymbol&quot;</span>, <span class="st">&quot;musym&quot;</span>)] <span class="co"># select column and row names using []</span></span>
<span id="cb24-6"><a href="intro.html#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="intro.html#cb24-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-8"><a href="intro.html#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtering by position</span></span>
<span id="cb24-9"><a href="intro.html#cb24-9" aria-hidden="true" tabindex="-1"></a>mu[<span class="dv">1</span>, ]          <span class="co"># select first row</span></span>
<span id="cb24-10"><a href="intro.html#cb24-10" aria-hidden="true" tabindex="-1"></a>mu[, <span class="dv">1</span>]          <span class="co"># select first column</span></span>
<span id="cb24-11"><a href="intro.html#cb24-11" aria-hidden="true" tabindex="-1"></a>mu[<span class="dv">2</span>, <span class="dv">2</span>]         <span class="co"># select second row and second column</span></span>
<span id="cb24-12"><a href="intro.html#cb24-12" aria-hidden="true" tabindex="-1"></a>mu[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>), ] <span class="co"># select multiple rows</span></span>
<span id="cb24-13"><a href="intro.html#cb24-13" aria-hidden="true" tabindex="-1"></a>mu[<span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>), ]  <span class="co"># drop multiple rows</span></span></code></pre></div>
<p><strong>Logical Operators</strong></p>
<ul>
<li><p><code>==</code> R uses a double equal sign as “equal-to” in SQL</p></li>
<li><p><code>!=</code> “Not-equal-to”</p></li>
<li><p><code>&lt;, &gt;, &lt;=, &gt;=</code> Less than, greater than, less than or equal to, and greater than or equal</p></li>
<li><p><code>&amp;</code> Equivalent to <code>AND</code> in SQL and Soil Taxonomy, must match both conditions</p></li>
<li><p><code>|</code> Equivalent to <code>OR</code> in SQL and Soil Taxonomy, must match at least one condition</p></li>
<li><p><code>%in%</code> Equivalent to <code>IN ()</code> in SQL (e.g. <code>mu$areasymbol %in% c("IN001", "IN111"</code>)</p></li>
<li><p><code>grepl()</code> equivalent to <code>LIKE</code> in SQL (e.g. <code>grepl("IN%", mu$areasymbol)</code>)</p></li>
</ul>
<p><strong>Filtering with logicals</strong></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r codeBlocks"><code class="sourceCode r"><span id="cb25-1"><a href="intro.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Standard evaluation with base R []</span></span>
<span id="cb25-2"><a href="intro.html#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="intro.html#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtering with logicals</span></span>
<span id="cb25-4"><a href="intro.html#cb25-4" aria-hidden="true" tabindex="-1"></a>mu[mu<span class="sc">$</span>areasymbol <span class="sc">==</span> <span class="st">&quot;IN001&quot;</span>, ]                <span class="co"># select rows that equal IN001</span></span>
<span id="cb25-5"><a href="intro.html#cb25-5" aria-hidden="true" tabindex="-1"></a>mu[mu<span class="sc">$</span>areasymbol <span class="sc">!=</span> <span class="st">&quot;IN001&quot;</span>, ]                <span class="co"># select rows that do not equal IN001</span></span>
<span id="cb25-6"><a href="intro.html#cb25-6" aria-hidden="true" tabindex="-1"></a>mu[, <span class="fu">names</span>(mu) <span class="sc">==</span> <span class="st">&quot;areasymbol&quot;</span>]               <span class="co"># select columns that equal areasymbol</span></span>
<span id="cb25-7"><a href="intro.html#cb25-7" aria-hidden="true" tabindex="-1"></a>mu[, <span class="fu">names</span>(mu) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;areasymbol&quot;</span>, <span class="st">&quot;musym&quot;</span>)] <span class="co"># select columns that match areasymbol and musym </span></span>
<span id="cb25-8"><a href="intro.html#cb25-8" aria-hidden="true" tabindex="-1"></a>mu[<span class="fu">grepl</span>(<span class="st">&quot;Miami&quot;</span>, mu<span class="sc">$</span>muname), ]               <span class="co"># select rows that contain Miami</span></span>
<span id="cb25-9"><a href="intro.html#cb25-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-10"><a href="intro.html#cb25-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-11"><a href="intro.html#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Non-standard evaluation with tidyverse</span></span>
<span id="cb25-12"><a href="intro.html#cb25-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-13"><a href="intro.html#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb25-14"><a href="intro.html#cb25-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-15"><a href="intro.html#cb25-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtering rows</span></span>
<span id="cb25-16"><a href="intro.html#cb25-16" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(mu, areasymbol <span class="sc">==</span> <span class="st">&quot;IN001&quot;</span>)</span>
<span id="cb25-17"><a href="intro.html#cb25-17" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(mu, areasymbol <span class="sc">!=</span> <span class="st">&quot;IN001&quot;</span>)</span>
<span id="cb25-18"><a href="intro.html#cb25-18" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(mu, areasymbol <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;IN001&quot;</span>, <span class="st">&quot;IN111&quot;</span>))</span>
<span id="cb25-19"><a href="intro.html#cb25-19" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(mu, <span class="fu">grepl</span>(<span class="st">&quot;Miami&quot;</span>, muname))</span>
<span id="cb25-20"><a href="intro.html#cb25-20" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(mu, muacres <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb25-21"><a href="intro.html#cb25-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-22"><a href="intro.html#cb25-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Select columns</span></span>
<span id="cb25-23"><a href="intro.html#cb25-23" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(mu, areasymbol, musym)</span>
<span id="cb25-24"><a href="intro.html#cb25-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-25"><a href="intro.html#cb25-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Slice  rows</span></span>
<span id="cb25-26"><a href="intro.html#cb25-26" aria-hidden="true" tabindex="-1"></a><span class="fu">slice</span>(mu, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code></pre></div>
</div>
<div id="transforming-data" class="section level3 hasAnchor" number="1.14.3">
<h3><span class="header-section-number">1.14.3</span> Transforming Data<a href="intro.html#transforming-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This allows you to create new columns by convert, compute, or combine data within existing columns.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r codeBlocks"><code class="sourceCode r"><span id="cb26-1"><a href="intro.html#cb26-1" aria-hidden="true" tabindex="-1"></a>mu <span class="ot">&lt;-</span> <span class="fu">mutate</span>(mu, </span>
<span id="cb26-2"><a href="intro.html#cb26-2" aria-hidden="true" tabindex="-1"></a>             <span class="co"># convert to hectares</span></span>
<span id="cb26-3"><a href="intro.html#cb26-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">muhectares =</span> muacres <span class="sc">*</span> <span class="fl">0.4047</span>,</span>
<span id="cb26-4"><a href="intro.html#cb26-4" aria-hidden="true" tabindex="-1"></a>             <span class="co"># convert muname to TRUE or FALSE if Miami is present using pattern matching</span></span>
<span id="cb26-5"><a href="intro.html#cb26-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">miami      =</span> <span class="fu">grepl</span>(<span class="st">&quot;Miami&quot;</span>, muname),</span>
<span id="cb26-6"><a href="intro.html#cb26-6" aria-hidden="true" tabindex="-1"></a>             <span class="co"># compute % minor component</span></span>
<span id="cb26-7"><a href="intro.html#cb26-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">n_minor    =</span> n_component <span class="sc">-</span> n_majcompflag,</span>
<span id="cb26-8"><a href="intro.html#cb26-8" aria-hidden="true" tabindex="-1"></a>             <span class="co"># combine columns</span></span>
<span id="cb26-9"><a href="intro.html#cb26-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">key        =</span> <span class="fu">paste</span>(areasymbol, musym)</span>
<span id="cb26-10"><a href="intro.html#cb26-10" aria-hidden="true" tabindex="-1"></a>             )</span></code></pre></div>
</div>
<div id="sorting-data" class="section level3 hasAnchor" number="1.14.4">
<h3><span class="header-section-number">1.14.4</span> Sorting Data<a href="intro.html#sorting-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sorting allows you to rearrange your data. Beware R has several similar functions (e.g. <code>sort</code> and <code>order</code>) for sorting data only work with specific datatypes. The tidyverse function <code>arrange</code> is designed to work with data frames.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r codeBlocks"><code class="sourceCode r"><span id="cb27-1"><a href="intro.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sort ascending</span></span>
<span id="cb27-2"><a href="intro.html#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(mu, areasymbol, muname)</span>
<span id="cb27-3"><a href="intro.html#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="intro.html#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co"># sort descending</span></span>
<span id="cb27-5"><a href="intro.html#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(mu, <span class="fu">desc</span>(areasymbol), <span class="fu">desc</span>(muname))</span></code></pre></div>
</div>
<div id="piping-data" class="section level3 hasAnchor" number="1.14.5">
<h3><span class="header-section-number">1.14.5</span> Piping Data<a href="intro.html#piping-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Another particularly useful feature provided by the <code>magrittr</code> package and used in the <code>tidyverse</code> is the use of <strong>pipe</strong> (<code>%&gt;%</code>).</p>
<p><code>f(x,y)</code> becomes <code>x %&gt;% f(y)</code></p>
<p>The “pipe” is something that occurs in many programming languages and computer contexts. It allows output from one expression to be passed as input to the first argument of the next function. This allows sequences of commands to be read from right to left, rather than from the inside out.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r codeBlocks"><code class="sourceCode r"><span id="cb28-1"><a href="intro.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># non-piping example 1</span></span>
<span id="cb28-2"><a href="intro.html#cb28-2" aria-hidden="true" tabindex="-1"></a>mu_sub <span class="ot">&lt;-</span> <span class="fu">filter</span>(mu, areasymbol <span class="sc">==</span> <span class="st">&quot;IN001&quot;</span>)</span>
<span id="cb28-3"><a href="intro.html#cb28-3" aria-hidden="true" tabindex="-1"></a>mu_sub <span class="ot">&lt;-</span> <span class="fu">mutate</span>(mu_sub, <span class="at">pct_100less =</span> pct_component <span class="sc">&lt;</span> <span class="dv">100</span>) </span>
<span id="cb28-4"><a href="intro.html#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="intro.html#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="co"># non-piping example 2</span></span>
<span id="cb28-6"><a href="intro.html#cb28-6" aria-hidden="true" tabindex="-1"></a>mu_sub <span class="ot">&lt;-</span> <span class="fu">mutate</span>(<span class="fu">filter</span>(mu, areasymbol <span class="sc">==</span> <span class="st">&quot;IN001&quot;</span>), <span class="at">pct_100less =</span> pct_component <span class="sc">&lt;</span> <span class="dv">100</span>)</span>
<span id="cb28-7"><a href="intro.html#cb28-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-8"><a href="intro.html#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="co"># piping</span></span>
<span id="cb28-9"><a href="intro.html#cb28-9" aria-hidden="true" tabindex="-1"></a>mu_sub <span class="ot">&lt;-</span> mu <span class="sc">%&gt;%</span> </span>
<span id="cb28-10"><a href="intro.html#cb28-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(areasymbol <span class="sc">==</span> <span class="st">&quot;IN001&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb28-11"><a href="intro.html#cb28-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pct_100less =</span> pct_component <span class="sc">&lt;</span> <span class="dv">100</span>)</span></code></pre></div>
</div>
<div id="mergingjoining-or-combining-data" class="section level3 hasAnchor" number="1.14.6">
<h3><span class="header-section-number">1.14.6</span> Merging/Joining or Combining Data<a href="intro.html#mergingjoining-or-combining-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>** Joining**</p>
<p>When working with tabular data you often have 2 or more tables you need to join. There are several ways to join tables. Which direction to join and which columns to join will determine how you achieve the join.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r codeBlocks"><code class="sourceCode r"><span id="cb29-1"><a href="intro.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># inner join</span></span>
<span id="cb29-2"><a href="intro.html#cb29-2" aria-hidden="true" tabindex="-1"></a>leg_mu <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(leg, mu, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;liid&quot;</span>, <span class="st">&quot;areasymbol&quot;</span>))</span>
<span id="cb29-3"><a href="intro.html#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="intro.html#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="co"># left join</span></span>
<span id="cb29-5"><a href="intro.html#cb29-5" aria-hidden="true" tabindex="-1"></a>leg_mu <span class="ot">&lt;-</span> <span class="fu">left_join</span>(leg, mu, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;liid&quot;</span>))</span>
<span id="cb29-6"><a href="intro.html#cb29-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-7"><a href="intro.html#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="co"># right_join</span></span>
<span id="cb29-8"><a href="intro.html#cb29-8" aria-hidden="true" tabindex="-1"></a>leg_mu <span class="ot">&lt;-</span> <span class="fu">right_join</span>(leg, mu, <span class="at">by =</span> <span class="st">&quot;liid&quot;</span>)</span></code></pre></div>
<p>** Combining**</p>
<p>If your tables have the same structure (e.g. columns), or length and order you may simply combine them. For example, if you have two different mapunit tables.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r codeBlocks"><code class="sourceCode r"><span id="cb30-1"><a href="intro.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># combine rows</span></span>
<span id="cb30-2"><a href="intro.html#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(mu, mu)</span>
<span id="cb30-3"><a href="intro.html#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(mu, leg) <span class="co"># won&#39;t work</span></span>
<span id="cb30-4"><a href="intro.html#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="intro.html#cb30-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-6"><a href="intro.html#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="co"># combine columns</span></span>
<span id="cb30-7"><a href="intro.html#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(mu, mu)  <span class="co"># beware combine tables with duplicate column names</span></span>
<span id="cb30-8"><a href="intro.html#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(mu, <span class="at">areasymbol_2 =</span> mu<span class="sc">$</span>areasymbol)</span>
<span id="cb30-9"><a href="intro.html#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(mu, leg) <span class="co"># won&#39;t work</span></span></code></pre></div>
</div>
<div id="aggregating-or-grouping-data" class="section level3 hasAnchor" number="1.14.7">
<h3><span class="header-section-number">1.14.7</span> Aggregating or Grouping Data<a href="intro.html#aggregating-or-grouping-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Because soil data has multiple dimensions (e.g. properties and depths) and levels of organization (e.g. many to one relationships), it is often necessary to aggregate it. For example, when we wish to make a map we often need to aggregate over components and then map units. Depending on the data type this aggregation may involve taking a weighted average or selecting the dominant condition.</p>
<p>The <code>group_by</code> function defines the groups over which we wish to <code>summarize</code> the data.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r codeBlocks"><code class="sourceCode r"><span id="cb31-1"><a href="intro.html#cb31-1" aria-hidden="true" tabindex="-1"></a>mu_agg <span class="ot">&lt;-</span> mu <span class="sc">%&gt;%</span> </span>
<span id="cb31-2"><a href="intro.html#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(grpname, areasymbol) <span class="sc">%&gt;%</span></span>
<span id="cb31-3"><a href="intro.html#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">sum_muacres =</span> <span class="fu">sum</span>(muacres),</span>
<span id="cb31-4"><a href="intro.html#cb31-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">n_musym     =</span> <span class="fu">length</span>(musym)</span>
<span id="cb31-5"><a href="intro.html#cb31-5" aria-hidden="true" tabindex="-1"></a>            )</span></code></pre></div>
</div>
<div id="reshaping-data" class="section level3 hasAnchor" number="1.14.8">
<h3><span class="header-section-number">1.14.8</span> Reshaping Data<a href="intro.html#reshaping-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Typically data is stored in what is known as a <strong>wide</strong> format, where each column contains a different variable (e.g. depth, clay, sand, rocks). However, sometimes it is necessary to reshape or pivot to a <strong>long</strong> format, where each variable/column is compressed into 2 new rows. One new column contains the old column names, while another new column contains the values from the old columns. This is particularly useful when combining multiple variables into a single plot.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r codeBlocks"><code class="sourceCode r"><span id="cb32-1"><a href="intro.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb32-2"><a href="intro.html#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="intro.html#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Simplify mu example dataset</span></span>
<span id="cb32-4"><a href="intro.html#cb32-4" aria-hidden="true" tabindex="-1"></a>mu2 <span class="ot">&lt;-</span> mu <span class="sc">%&gt;%</span></span>
<span id="cb32-5"><a href="intro.html#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(grpname, areasymbol, musym, muacres, n_component, pct_hydric) <span class="sc">%&gt;%</span></span>
<span id="cb32-6"><a href="intro.html#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb32-7"><a href="intro.html#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(mu2)</span>
<span id="cb32-8"><a href="intro.html#cb32-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-9"><a href="intro.html#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot long</span></span>
<span id="cb32-10"><a href="intro.html#cb32-10" aria-hidden="true" tabindex="-1"></a>mu2_long <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(mu2, <span class="at">cols =</span> <span class="fu">c</span>(muacres, n_component, pct_hydric))</span>
<span id="cb32-11"><a href="intro.html#cb32-11" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(mu2_long)</span>
<span id="cb32-12"><a href="intro.html#cb32-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-13"><a href="intro.html#cb32-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot wide</span></span>
<span id="cb32-14"><a href="intro.html#cb32-14" aria-hidden="true" tabindex="-1"></a>mu2_wide <span class="ot">&lt;-</span> <span class="fu">pivot_wider</span>(mu2_long, <span class="at">names_from =</span> name)</span>
<span id="cb32-15"><a href="intro.html#cb32-15" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(mu2_wide)</span></code></pre></div>
</div>
<div id="exporting-data" class="section level3 hasAnchor" number="1.14.9">
<h3><span class="header-section-number">1.14.9</span> Exporting Data<a href="intro.html#exporting-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To export data from R, use the command <code>write.csv()</code> or <code>write.dbf()</code> functions. Since we have already set our working directory, R automatically saves our file into the working directory.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r codeBlocks"><code class="sourceCode r"><span id="cb33-1"><a href="intro.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(mu_agg, <span class="at">file =</span> <span class="st">&quot;mu_agg.csv&quot;</span>)</span>
<span id="cb33-2"><a href="intro.html#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="intro.html#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="intro.html#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(foreign)</span>
<span id="cb33-5"><a href="intro.html#cb33-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-6"><a href="intro.html#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="fu">write.dbf</span>(mu_agg, <span class="at">file =</span> <span class="st">&quot;mu_agg.dbf&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="exercise-2" class="section level2 hasAnchor" number="1.15">
<h2><span class="header-section-number">1.15</span> Exercise 2<a href="intro.html#exercise-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li><p>Create a new R script file.</p></li>
<li><p>To get information from the NASIS legend table for the state of Wisconsin use the soilDB function <code>get_legend_from_NASISWebReport()</code> for <code>mlraoffice = "%"</code> and <code>areasymbol = "WI%</code></p></li>
<li><p>Filter the legend table for rows where the <code>ssastatus == "Update needed"</code> to find the soil survey areas that need update. Inspect the result to find the <code>areasymbol</code> values.</p></li>
<li><p>Load the mapunit table, using soilDB <code>get_mapunit_from_NASISWebReport()</code> using the area symbols you identified in step 3.</p></li>
<li><p>Calculate the acreage of hydric soils for each mapunit by multiplying <code>muacres</code> by <code>pct_hydric</code>. Note: <code>pct_hydric</code> is a percentage, not a proportion.</p></li>
<li><p>Aggregate the total acreage of hydric soils each soil survey area using dplyr functions <code>group_by</code> and <code>summarize</code>.</p></li>
<li><p>Join the aggregated mapunit table from Step 6 to the legend table from Step 3 using dplyr <code>left_join</code>.</p></li>
<li><p>Calculate the proportion of the total soil survey area acres (<code>areaacres</code>) that are hydric soils.</p></li>
<li><p>Answer the following questions:</p>
<ul>
<li><p>What soil survey areas need update in Wisconsin?</p></li>
<li><p>What proportion of those soil survey areas are hydric soils?</p></li>
<li><p>Bonus: How does your joined result in Step 7 differ if you replace dplyr <code>left_join</code> with <code>inner_join</code>? Why?</p></li>
</ul></li>
<li><p>Save your R script and forward to your instructor.</p></li>
</ol>
</div>
<div id="review" class="section level2 hasAnchor" number="1.16">
<h2><span class="header-section-number">1.16</span> Review<a href="intro.html#review" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Given what you now know about R, try to answer the following questions:</p>
<ol style="list-style-type: decimal">
<li><p>Can you think of a situation where an existing hypothesis or conventional wisdom was not repeatable?</p></li>
<li><p>What are packages?</p></li>
<li><p>What is GitHub?</p></li>
<li><p>Where can you get help?</p></li>
<li><p>What is a data frame?</p></li>
<li><p>What are 3 ways you can manipulate a data frame?</p></li>
</ol>
</div>
<div id="additional-reading-introduction" class="section level2 hasAnchor" number="1.17">
<h2><span class="header-section-number">1.17</span> Additional Reading (Introduction)<a href="intro.html#additional-reading-introduction" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Introductory R Books
<ul>
<li><a href="https://r4ds.had.co.nz/index.html">R for Data Science</a></li>
<li><a href="https://rstudio.com/resources/cheatsheets/">RStudio Cheatsheets</a></li>
<li><a href="https://www.statmethods.net/">Quick-R</a></li>
</ul></li>
<li>Advanced DSM R Books
<ul>
<li><a href="https://envirometrix.github.io/PredictiveSoilMapping/">Predictive Soil Mapping with R</a></li>
<li><a href="http://www.springer.com/us/book/9783319443256">Using R for Digital Soil Mapping (not free)</a></li>
<li><a href="https://github.com/AlexandreWadoux/soilspec">Soil Spectral Inference with R (not free)</a></li>
<li><a href="https://fao-gsp.github.io/SOC-Mapping-Cookbook/">GSP SOC Cookbook</a></li>
<li><a href="https://fao-gsp.github.io/GSSmap">GSP SAS Manual</a></li>
</ul></li>
<li>Soil Science R Applications
<ul>
<li><a href="http://ncss-tech.github.io/AQP/">aqp and soilDB tutorials</a></li>
<li><a href="https://www.isric.org/utilise/capacity-building/training-courses#examplecourses">ISRIC World Soil Information Example Training Courses</a></li>
<li><a href="https://www.youtube.com/channel/UCNi1XYjdXWF9eAjvG40KqWg">ISRIC World Soil Information YouTube Channel</a></li>
<li><a href="https://opengeohub.org/course">OpenGeoHub Courses</a></li>
<li><a href="https://www.youtube.com/channel/UC6HFFFYiV4zEYJlQMIXemWA/featured">OpenGeoHub YouTube Channel</a></li>
<li><a href="http://www.css.cornell.edu/faculty/dgr2/">David Rossiter’s Cornell Homepage</a></li>
<li><a href="https://pierreroudier.github.io/teaching/index.html">Pierre Roudier</a></li>
</ul></li>
<li>Soil Sciences and Statistics Review Articles
<ul>
<li>Arkely, R., 1976. Statistical Methods in Soil Classification Research. Advances in Agronomy 28:37-70. <a href="https://www.sciencedirect.com/science/article/pii/S0065211308605520">https://www.sciencedirect.com/science/article/pii/S0065211308605520</a></li>
<li>Mausbach, M., and L. Wilding, 1991. Spatial Variability of Soils and Landforms. Soil Science Society of America, Madison. <a href="https://dl.sciencesocieties.org/publications/books/tocs/sssaspecialpubl/spatialvariabil">https://dl.sciencesocieties.org/publications/books/tocs/sssaspecialpubl/spatialvariabil</a></li>
<li>Wilding, L., Smeck, N., and G. Hall, 1983. Spatial Variability and Pedology. In : L. Widling, N. Smeck, and G. Hall (Eds). Pedogenesis and Soil Taxonomy I. Conceps and Interactions. Elseiver, Amsterdam, pp. 83-116. <a href="https://www.sciencedirect.com/science/article/pii/S0166248108705993">https://www.sciencedirect.com/science/article/pii/S0166248108705993</a></li>
</ul></li>
</ul>

</div>
</div>
<h3>References<a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-arnold1991" class="csl-entry">
Arnold, R. W., and L. P. Wilding. 1991. <span>“The <span>Need</span> to <span>Quantify</span> <span>Spatial</span> <span>Variability</span>.”</span> In <em><span>SSSA</span> <span>Special</span> <span>Publications</span></em>, edited by M. J. Mausbach and L. P. Wilding, 1–8. Madison, WI, USA: Soil Science Society of America. <a href="https://doi.org/10.2136/sssaspecpub28.c1">https://doi.org/10.2136/sssaspecpub28.c1</a>.
</div>
<div id="ref-brevik2016" class="csl-entry">
Brevik, Eric C., Jeffrey A. Homburg, Bradley A. Miller, Thomas E. Fenton, James A. Doolittle, and Samuel J. Indorante. 2016. <span>“Selected Highlights in American Soil Science History from the 1980s to the Mid-2010s.”</span> <em><span>CATENA</span></em> 146 (November): 128–46. <a href="https://doi.org/10.1016/j.catena.2016.06.021">https://doi.org/10.1016/j.catena.2016.06.021</a>.
</div>
<div id="ref-chaney2016" class="csl-entry">
Chaney, Nathaniel W., Eric F. Wood, Alexander B. McBratney, Jonathan W. Hempel, Travis W. Nauman, Colby W. Brungard, and Nathan P. Odgers. 2016. <span>“<span>POLARIS</span>: A 30-Meter Probabilistic Soil Series Map of the Contiguous United States.”</span> <em>Geoderma</em> 274: 54–67. <a href="https://doi.org/10.1016/j.geoderma.2016.03.025">https://doi.org/10.1016/j.geoderma.2016.03.025</a>.
</div>
<div id="ref-hennemann2004" class="csl-entry">
Hennemann, G R, and D G Rossiter. 2004. <span>“Training Needs for the Next Generation of Soil Surveyors.”</span> In <em>International Conference on Innovative Techniques in Soil Survey, Cha’am, Thailand, 21-26 March 2004</em>, 22–26. Cha-Am, Thailand: Land Development Department. <a href="http://www.css.cornell.edu/faculty/dgr2/Docs/ChaAm/ChaAmKeynoteHennemann.pdf">http://www.css.cornell.edu/faculty/dgr2/Docs/ChaAm/ChaAmKeynoteHennemann.pdf</a>.
</div>
<div id="ref-ihaka1996" class="csl-entry">
Ihaka, Ross, and Robert Gentleman. 1996. <span>“R: A Language for Data Analysis and Graphics.”</span> <em>Journal of Computational and Graphical Statistics</em> 5 (3): 299–314. <a href="https://doi.org/10.1080/10618600.1996.10474713">https://doi.org/10.1080/10618600.1996.10474713</a>.
</div>
<div id="ref-kempen2012" class="csl-entry">
Kempen, Bas, Dick J. Brus, Jetse J. Stoorvogel, Gerard B. M. Heuvelink, and Folkert de Vries. 2012. <span>“Efficiency Comparison of Conventional and Digital Soil Mapping for Updating Soil Maps.”</span> <em>Soil Science Society of America Journal</em> 76 (6): 2097–2115. https://doi.org/<a href="https://doi.org/10.2136/sssaj2011.0424">https://doi.org/10.2136/sssaj2011.0424</a>.
</div>
<div id="ref-macmillan2007" class="csl-entry">
MacMillan, Robert A., David E. Moon, and Ray A. Coupé. 2007. <span>“Automated Predictive Ecological Mapping in a Forest Region of b.c., Canada, 2001–2005.”</span> <em>Geoderma</em> 140 (4): 353–73. <a href="https://doi.org/10.1016/j.geoderma.2007.04.027">https://doi.org/10.1016/j.geoderma.2007.04.027</a>.
</div>
<div id="ref-mausbach2003" class="csl-entry">
Mausbach, M. J. 2003. <span>“The Importance of Statistical Documentation - Keeping Soil Survey Information Relevant in the 21st Century.”</span> In <em>2003 National Cooperative Soil Survey Conference</em>, 3–6. Plymouth, Massachusetts: National Cooperative Soil Survey. <a href="https://web.archive.org/web/20220121020421/https://www.nrcs.usda.gov/Internet/FSE_DOCUMENTS/nrcs142p2_051833.pdf">https://web.archive.org/web/20220121020421/https://www.nrcs.usda.gov/Internet/FSE_DOCUMENTS/nrcs142p2_051833.pdf</a>.
</div>
<div id="ref-maynard2019" class="csl-entry">
Maynard, Jonathan J., Travis W. Nauman, Shawn W. Salley, Brandon T. Bestelmeyer, Michael C. Duniway, Curtis J. Talbot, and Joel R. Brown. 2019. <span>“Digital <span>Mapping</span> of <span>Ecological</span> <span>Land</span> <span>Units</span> Using a <span>Nationally</span> <span>Scalable</span> <span>Modeling</span> <span>Framework</span>.”</span> <em>Soil Science Society of America Journal</em> 83 (3): 666–66. <a href="https://doi.org/10.2136/sssaj2018.09.0346">https://doi.org/10.2136/sssaj2018.09.0346</a>.
</div>
<div id="ref-ramcharan2018" class="csl-entry">
Ramcharan, Amanda, Tomislav Hengl, Travis Nauman, Colby Brungard, Sharon Waltman, Skye Wills, and James Thompson. 2018. <span>“Soil Property and Class Maps of the Conterminous United States at 100-Meter Spatial Resolution.”</span> <em>Soil Science Society of America Journal</em> 82 (1): 186–201. https://doi.org/<a href="https://doi.org/10.2136/sssaj2017.04.0122">https://doi.org/10.2136/sssaj2017.04.0122</a>.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["s4ssbook.pdf", "s4ssbook.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
